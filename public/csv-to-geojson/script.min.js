!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require
if(!a&&u)return u(s,!0)
if(o)return o(s,!0)
var c=new Error("Cannot find module '"+s+"'")
throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}}
t[s][0].call(l.exports,function(e){var n=t[s][1][e]
return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s])
return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number")
return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,u,c
if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t
throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1
if(i(n))switch(arguments.length){case 1:n.call(this)
break
case 2:n.call(this,arguments[1])
break
case 3:n.call(this,arguments[1],arguments[2])
break
default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o)
return!0},r.prototype.addListener=function(e,t){var n
if(!i(t))throw TypeError("listener must be a function")
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function")
var r=!1
return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,a
if(!i(t))throw TypeError("listener must be a function")
if(!this._events||!this._events[e])return this
if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t)
else if(s(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a
break}if(0>r)return this
1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n
if(!this._events)return this
if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this
if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t)
return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n)
else if(n)for(;n.length;)this.removeListener(e,n[n.length-1])
return delete this._events[e],this},r.prototype.listeners=function(e){var t
return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e]
if(i(t))return 1
if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){function r(){i("converter",function(e){o("converter",e,function(){r()})})}var i=e("../../components/drop-zone-csv/index"),o=e("../../components/convert-csv/index")
window.onload=function(){r()}},{"../../components/convert-csv/index":3,"../../components/drop-zone-csv/index":8}],3:[function(e,t,n){function r(e){u.header(e.divId,e.data,function(){c.header(function(t){t?(e.hasHead(),i(e)):u.setHead(e.divId,e.data,function(){c.setHead(e.nbCols,function(t){e.setHead(t),i(e)})})})})}function i(e){u.geoCol(e.divId,function(){c.geoCol(function(t){t?s(e):o(e)})})}function o(e){u.llCol(e.divId,e.head,function(){c.llCol(function(t,n){e.setLL(t,n,function(){e.geojson(function(t){f.json("collection.json",t),e.evt.emit("csv-converted")})})})})}function s(e){u.wktCol(e.divId,e.head,function(){c.wktCol(function(t){console.log(e),e.setWKT(t,function(){e.geojson(function(t){f.json("collection.json",t),e.evt.emit("csv-converted")})})})})}var a=e("./lib/Conf"),u=e("./lib/html"),c=e("./lib/ctrl"),l=e("./lib/parse"),f=e("../utils/save"),d=e("events").EventEmitter
t.exports=function(e,t,n){var i=new d
u.parsing(e,function(){l(t,function(t){if(t.errors.length>0)u.parseErrors(e,t.errors)
else{var o=new a(e,t.data,i)
r(o),o.evt.on("csv-converted",function(){n()})}})})}},{"../utils/save":15,"./lib/Conf":4,"./lib/ctrl":5,"./lib/html":6,"./lib/parse":7,events:1}],4:[function(e,t,n){var r=e("wellknown")
t.exports=function(e,t,n){var i=this
return i.divId=e,i.data=t,i.evt=n,i.head=null,i.lines=[],i.nbCols=i.data[0].length,i.hasHead=function(){i.head=i.data[0],i.data.forEach(function(e,t){if(0!==t){var n={}
e.forEach(function(e,t){if(isNaN(e))var r=e
else var r=+e
n[i.head[t]]=r}),i.lines.push(n)}})},i.setHead=function(e){i.head=e,i.data.forEach(function(e,t){var n={}
e.forEach(function(e,t){if(isNaN(e))var r=e
else var r=+e
n[i.head[t]]=r}),i.lines.push(n)})},i.setLL=function(e,t,n){i.lines.forEach(function(n){n.geometry={type:"Point",coordinates:[n[i.head[e]],n[i.head[t]]]}}),n()},i.setWKT=function(e,t){console.log("conf.setWKT",e),i.lines.forEach(function(t){t[i.head[e]]&&(t.geometry=r(t[i.head[e]]))}),t()},i.geojson=function(e){var t={type:"FeatureCollection",features:[]}
i.lines.forEach(function(e){if(e.geometry){var n={type:"Feature",properties:{}}
for(k in e)"geometry"===k?n.geometry=e[k]:n.properties[k]=e[k]
t.features.push(n)}}),e(t)},this}},{wellknown:17}],5:[function(e,t,n){n.header=function(e){var t=document.getElementById("csv-header-yes"),n=document.getElementById("csv-header-no")
t.onclick=function(){e(!0)},n.onclick=function(){e(!1)}},n.setHead=function(e,t){var n=[]
for(i=0;i<e;i++)n.push("set-head-input-"+i)
var r=[]
n.forEach(function(e){var t=document.getElementById(e)
r.push(t)})
var o=document.getElementById("set-head-done")
o.onclick=function(){var n=[]
r.forEach(function(e,t){console.log(e)
var r=e.value
r&&n.push(r)}),n.length===e?t(n):document.getElementById("set-head-error").innerHTML="All column names need to be filled"}},n.geoCol=function(e){var t=document.getElementById("csv-lat-lng"),n=document.getElementById("csv-wkt")
t.onclick=function(){e(!1)},n.onclick=function(){e(!0)}},n.llCol=function(e){var t=document.getElementById("select-lat"),n=document.getElementById("select-lng"),r=document.getElementById("ll-col-done")
r.onclick=function(){e(+n.value,+t.value)}},n.wktCol=function(e){var t=document.getElementById("select-wkt"),n=document.getElementById("wkt-col-done")
n.onclick=function(){e(+t.value)}}},{}],6:[function(e,t,n){n.parsing=function(e,t){var n=document.getElementById(e)
n.innerHTML="<p>Parsing...</p>",t()},n.parseErrors=function(e,t){var n="<p>Could not parse file.<br/><b>Errors</b>:<br/>"
t.forEach(function(e){var t=JSON.stringify(e)
n=n+t+"</br>"}),n+="</p>"
var r=document.getElementById(e)
r.innerHTML=n},n.header=function(e,t,n){var r="<p>This is the first line:</p>"
t[0].forEach(function(e,t){r=r+'<p class="fake-table-cell">'+e+"</p>"}),r+='<p>Are these the names of the columns?</p><button id="csv-header-yes">Yes</button><button id="csv-header-no">No</button>'
var i=document.getElementById(e)
i.innerHTML=r,n()},n.setHead=function(e,t,n){var r="<p>Name the columns</p><table><tr><th>First row</th><th>Column name</th></tr>"
t[0].forEach(function(e,t){r=r+"<tr><td>"+e+'</td><td><input id="set-head-input-'+t+'"></td></tr><p id="set-head-error"></p>'}),r+='</table><button id="set-head-done">Done</button>'
var i=document.getElementById(e)
i.innerHTML=r,n()},n.geoCol=function(e,t){var n=document.getElementById(e)
n.innerHTML='<p>How is the geographic data presented?</p><button id="csv-lat-lng">Lat / Lng</button><button id="csv-wkt">WKT</button><p>Use <b>Lat / Lng</b> if you have two columns with latitude and longitude</p><p>Use <b>WKT</b> if you have one column with a <a href="https://en.wikipedia.org/wiki/Well-known_text">WKT</a> string</p>',t()},n.llCol=function(e,t,n){var r=document.getElementById(e),i='<p>Choose which column corresponds to</p><p><b>Latitude</b></p><select id="select-lat">'
t.forEach(function(e,t){i=i+'<option value="'+t+'">'+e+"</option>"}),i+='</select><p><b>Longitude</b></p><select id="select-lng">',t.forEach(function(e,t){i=i+'<option value="'+t+'">'+e+"</option>"}),i+='</select><br/><button id="ll-col-done">Done</button>',r.innerHTML=i,n()},n.wktCol=function(e,t,n){var r=document.getElementById(e),i='<p>Choose which column corresponds to <b>WKT</b></p><select id="select-wkt">'
t.forEach(function(e,t){i=i+'<option value="'+t+'">'+e+"</option>"}),i+='</select><br/><button id="wkt-col-done">Done</button>',r.innerHTML=i,n()}},{}],7:[function(e,t,n){var r=e("papaparse")
t.exports=function(e,t){r.parse(e,{complete:function(e){t(e)}})}},{papaparse:16}],8:[function(e,t,n){var r=e("./lib/html"),i=e("./lib/init"),o=e("./lib/browse"),s=e("events").EventEmitter
t.exports=function(e,t){var n=new s
r.init(e,function(){i(n)
var t=document.getElementById("browse-btn")
t.onclick=function(){r.browse(e,function(){o(n)})}}),n.on("read-csv",function(e){t(e)})}},{"./lib/browse":9,"./lib/html":10,"./lib/init":11,events:1}],9:[function(e,t,n){var r=(e("./msg"),e("./verify-dropped"))
t.exports=function(e){var t=document.getElementById("file-input")
t.onchange=function(n){r(t.files[0],e)}}},{"./msg":12,"./verify-dropped":14}],10:[function(e,t,n){n.init=function(e,t){var n=document.getElementById(e)
n.innerHTML='<div id="drop-zone"></div><p id="msg"></p><button id="browse-btn">Browse the file system</button>',t()},n.browse=function(e,t){var n=document.getElementById(e)
n.innerHTML='<p id="msg">Load a CSV or TSV file</p><input id="file-input" type="file"></input>',t()}},{}],11:[function(e,t,n){function r(e,t){e.preventDefault(),s(e.dataTransfer.files[0],t)}function i(e){e.ondragover=function(e){return e.preventDefault(),!1},e.ondragenter=function(e){return e.preventDefault(),!1}}var o=e("./msg"),s=e("./verify-dropped")
t.exports=function(e){if(window.FileReader){var t=document.getElementById("drop-zone")
i(t),t.ondrop=function(t){r(t,e)},o.write("Drop a CSV file"),o.add("or")}else o.write("Your browser does not support the HTML5 FileReader.")}},{"./msg":12,"./verify-dropped":14}],12:[function(e,t,n){n.write=function(e){var t=document.getElementById("msg")
t.innerHTML=e},n.add=function(e){var t=document.getElementById("msg"),n=t.innerHTML
t.innerHTML=n+"<br/>"+e}},{}],13:[function(e,t,n){t.exports=function(e,t){var n=new FileReader
n.onload=function(){t(n.result)},n.readAsText(e)}},{}],14:[function(e,t,n){function r(e){return"text/csv"===e.type?(i.write("Document is a CSV file"),!0):"text/tab-separated-values"===e.type?(i.write("Document is a TSV file"),!0):(i.write("Document is not a CSV or TSV file"),!1)}var i=e("./msg"),o=e("./read-text")
t.exports=function(e,t){i.write("Verifying document..."),r(e)&&o(e,function(e){t.emit("read-csv",e)})}},{"./msg":12,"./read-text":13}],15:[function(e,t,n){var r=r||function(e){"use strict"
if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(e){var t=new MouseEvent("click")
e.dispatchEvent(t)},s=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",l=4e4,f=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}
setTimeout(t,l)},d=function(e,t,n){t=[].concat(t)
for(var r=t.length;r--;){var i=e["on"+t[r]]
if("function"==typeof i)try{i.call(e,n||e)}catch(o){u(o)}}},h=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(t,u,l){l||(t=h(t))
var p,v=this,m=t.type,g=m===c,y=function(){d(v,"writestart progress write writeend".split(" "))},_=function(){if((a||g&&s)&&e.FileReader){var r=new FileReader
return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank")
n||(e.location.href=t),t=void 0,v.readyState=v.DONE,y()},r.readAsDataURL(t),void(v.readyState=v.INIT)}if(p||(p=n().createObjectURL(t)),g)e.location.href=p
else{var i=e.open(p,"_blank")
i||(e.location.href=p)}v.readyState=v.DONE,y(),f(p)}
return v.readyState=v.INIT,i?(p=n().createObjectURL(t),void setTimeout(function(){r.href=p,r.download=u,o(r),y(),f(p),v.readyState=v.DONE})):void _()},v=p.prototype,m=function(e,t,n){return new p(e,t||e.name||"download",n)}
return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=h(e)),navigator.msSaveOrOpenBlob(e,t)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content)
"undefined"!=typeof t&&t.exports?t.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return r}),n.json=function(e,t){var n=new Blob([JSON.stringify(t)],{type:"application/json;charset=utf-8"})
r(n,e)},n.text=function(e,t){var n=new Blob([t],{type:"text/plain;charset=utf-8"})
r(n,e)},n.svg=function(e,t){var n=new Blob([t],{type:"image/svg+xml;charset=utf-8"})
r(n,e)},n.blob=function(e,t){r(t,e)}},{}],16:[function(e,t,n){!function(e){"use strict"
function n(t,n){if(n=n||{},n.worker&&C.WORKERS_SUPPORTED){var r=f()
return r.userStep=n.step,r.userChunk=n.chunk,r.userComplete=n.complete,r.userError=n.error,n.step=y(n.step),n.chunk=y(n.chunk),n.complete=y(n.complete),n.error=y(n.error),delete n.worker,void r.postMessage({input:t,config:n,workerId:r.id})}var i=null
return"string"==typeof t?i=n.download?new o(n):new a(n):(e.File&&t instanceof File||t instanceof Object)&&(i=new s(n)),i.stream(t)}function r(e,t){function n(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==C.BAD_DELIMITERS.indexOf(t.delimiter)&&(u=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(a=t.quotes),"string"==typeof t.newline&&(c=t.newline))}function r(e){if("object"!=typeof e)return[]
var t=[]
for(var n in e)t.push(n)
return t}function i(e,t){var n=""
"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t))
var r=e instanceof Array&&e.length>0,i=!(t[0]instanceof Array)
if(r){for(var s=0;s<e.length;s++)s>0&&(n+=u),n+=o(e[s],s)
t.length>0&&(n+=c)}for(var a=0;a<t.length;a++){for(var l=r?e.length:t[a].length,f=0;l>f;f++){f>0&&(n+=u)
var d=r&&i?e[f]:f
n+=o(t[a][d],f)}a<t.length-1&&(n+=c)}return n}function o(e,t){if("undefined"==typeof e||null===e)return""
e=e.toString().replace(/"/g,'""')
var n="boolean"==typeof a&&a||a instanceof Array&&a[t]||s(e,C.BAD_DELIMITERS)||e.indexOf(u)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1)
return n?'"'+e+'"':e}function s(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0
return!1}var a=!1,u=",",c="\r\n"
if(n(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return i(null,e)
if("object"==typeof e[0])return i(r(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:r(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),i(e.fields||[],e.data||[])
throw"exception: Unable to serialize unrecognized input"}function i(t){function n(e){var t=m(e)
t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new u(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},n.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&y(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t)
void 0!==n&&(t=n)}this.isFirstChunk=!1
var r=this._partialLine+t
this._partialLine=""
var i=this._handle.parse(r,this._baseIndex,!this._finished)
if(!this._handle.paused()&&!this._handle.aborted()){var o=i.meta.cursor
this._finished||(this._partialLine=r.substring(o-this._baseIndex),this._baseIndex=o),i&&i.data&&(this._rowCount+=i.data.length)
var s=this._finished||this._config.preview&&this._rowCount>=this._config.preview
if(w)e.postMessage({results:i,workerId:C.WORKER_ID,finished:s})
else if(y(this._config.chunk)){if(this._config.chunk(i,this._handle),this._paused)return
i=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),!s||!y(this._config.complete)||i&&i.meta.aborted||this._config.complete(this._completeResults),s||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(t){y(this._config.error)?this._config.error(t):w&&this._config.error&&e.postMessage({workerId:C.WORKER_ID,error:t,finished:!1})}}function o(e){function t(e){var t=e.getResponseHeader("Content-Range")
return parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=C.RemoteChunkSize),i.call(this,e)
var n
b?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded()
if(n=new XMLHttpRequest,b||(n.onload=g(this._chunkLoaded,this),n.onerror=g(this._chunkError,this)),n.open("GET",this._input,!b),this._config.chunkSize){var e=this._start+this._config.chunkSize-1
n.setRequestHeader("Range","bytes="+this._start+"-"+e),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(t){this._chunkError(t.message)}b&&0==n.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==n.readyState){if(n.status<200||n.status>=400)return void this._chunkError()
this._finished=!this._config.chunkSize||this._start>t(n),this.parseChunk(n.responseText)}},this._chunkError=function(e){var t=n.statusText||e
this._sendError(t)}}function s(e){e=e||{},e.chunkSize||(e.chunkSize=C.LocalChunkSize),i.call(this,e)
var t,n,r="undefined"!=typeof FileReader
this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?(t=new FileReader,t.onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input
if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size)
e=n.call(e,this._start,i)}var o=t.readAsText(e,this._config.encoding)
r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function a(e){e=e||{},i.call(this,e)
var t,n
this.stream=function(e){return t=e,n=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?n.substr(0,e):n
return n=e?n.substr(e):"",this._finished=!n,this.parseChunk(t)}}}function u(e){function t(){if(w&&d&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),d=!1),e.skipEmptyLines)for(var t=0;t<w.data.length;t++)1==w.data[t].length&&""==w.data[t][0]&&w.data.splice(t--,1)
return n()&&r(),i()}function n(){return e.header&&0==b.length}function r(){if(w){for(var e=0;n()&&e<w.data.length;e++)for(var t=0;t<w.data[e].length;t++)b.push(w.data[e][t])
w.data.splice(0,1)}}function i(){if(!w||!e.header&&!e.dynamicTyping)return w
for(var t=0;t<w.data.length;t++){for(var n={},r=0;r<w.data[t].length;r++){if(e.dynamicTyping){var i=w.data[t][r]
"true"==i||"TRUE"==i?w.data[t][r]=!0:"false"==i||"FALSE"==i?w.data[t][r]=!1:w.data[t][r]=a(i)}e.header&&(r>=b.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(w.data[t][r])):n[b[r]]=w.data[t][r])}e.header&&(w.data[t]=n,r>b.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+b.length+" fields but parsed "+r,t):r<b.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+b.length+" fields but parsed "+r,t))}return e.header&&w.meta&&(w.meta.fields=b),w}function o(t){for(var n,r,i,o=[",","	","|",";",C.RECORD_SEP,C.UNIT_SEP],s=0;s<o.length;s++){var a=o[s],u=0,l=0
i=void 0
for(var f=new c({delimiter:a,preview:10}).parse(t),d=0;d<f.data.length;d++){var h=f.data[d].length
l+=h,"undefined"!=typeof i?h>1&&(u+=Math.abs(h-i),i=h):i=h}f.data.length>0&&(l/=f.data.length),("undefined"==typeof r||r>u)&&l>1.99&&(r=u,n=a)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function s(e){e=e.substr(0,1048576)
var t=e.split("\r")
if(1==t.length)return"\n"
for(var n=0,r=0;r<t.length;r++)"\n"==t[r][0]&&n++
return n>=t.length/2?"\r\n":"\r"}function a(e){var t=h.test(e)
return t?parseFloat(e):e}function u(e,t,n,r){w.errors.push({type:e,code:t,message:n,row:r})}var l,f,d,h=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,p=this,v=0,g=!1,_=!1,b=[],w={data:[],errors:[],meta:{}}
if(y(e.step)){var E=e.step
e.step=function(r){if(w=r,n())t()
else{if(t(),0==w.data.length)return
v+=r.data.length,e.preview&&v>e.preview?f.abort():E(w,p)}}}this.parse=function(n,r,i){if(e.newline||(e.newline=s(n)),d=!1,!e.delimiter){var a=o(n)
a.successful?e.delimiter=a.bestDelimiter:(d=!0,e.delimiter=C.DefaultDelimiter),w.meta.delimiter=e.delimiter}var u=m(e)
return e.preview&&e.header&&u.preview++,l=n,f=new c(u),w=f.parse(l,r,i),t(),g?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return g},this.pause=function(){g=!0,f.abort(),l=l.substr(f.getCharIndex())},this.resume=function(){g=!1,p.streamer.parseChunk(l)},this.aborted=function(){return _},this.abort=function(){_=!0,f.abort(),w.meta.aborted=!0,y(e.complete)&&e.complete(w),l=""}}function c(e){e=e||{}
var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode
if(("string"!=typeof t||C.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw"Comment character same as delimiter"
r===!0?r="#":("string"!=typeof r||C.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n")
var a=0,u=!1
this.parse=function(e,c,l){function f(e){w.push(e),L=a}function d(t){return l?p():("undefined"==typeof t&&(t=e.substr(a)),k.push(t),a=m,f(k),b&&v(),p())}function h(t){a=t,f(k),k=[],S=e.indexOf(n,a)}function p(e){return{data:w,errors:E,meta:{delimiter:t,linebreak:n,aborted:u,truncated:!!e,cursor:L+(c||0)}}}function v(){i(p()),w=[],E=[]}if("string"!=typeof e)throw"Input must be a string"
var m=e.length,g=t.length,y=n.length,_=r.length,b="function"==typeof i
a=0
var w=[],E=[],k=[],L=0
if(!e)return p()
if(s||s!==!1&&-1===e.indexOf('"')){for(var C=e.split(n),I=0;I<C.length;I++){var k=C[I]
if(a+=k.length,I!==C.length-1)a+=n.length
else if(l)return p()
if(!r||k.substr(0,_)!=r){if(b){if(w=[],f(k.split(t)),v(),u)return p()}else f(k.split(t))
if(o&&I>=o)return w=w.slice(0,o),p(!0)}}return p()}for(var x=e.indexOf(t,a),S=e.indexOf(n,a);;)if('"'!=e[a])if(r&&0===k.length&&e.substr(a,_)===r){if(-1==S)return p()
a=S+y,S=e.indexOf(n,a),x=e.indexOf(t,a)}else if(-1!==x&&(S>x||-1===S))k.push(e.substring(a,x)),a=x+g,x=e.indexOf(t,a)
else{if(-1===S)break
if(k.push(e.substring(a,S)),h(S+y),b&&(v(),u))return p()
if(o&&w.length>=o)return p(!0)}else{var T=a
for(a++;;){var T=e.indexOf('"',T+1)
if(-1===T)return l||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:a}),d()
if(T===m-1){var R=e.substring(a,T).replace(/""/g,'"')
return d(R)}if('"'!=e[T+1]){if(e[T+1]==t){k.push(e.substring(a,T).replace(/""/g,'"')),a=T+1+g,x=e.indexOf(t,a),S=e.indexOf(n,a)
break}if(e.substr(T+1,y)===n){if(k.push(e.substring(a,T).replace(/""/g,'"')),h(T+1+y),x=e.indexOf(t,a),b&&(v(),u))return p()
if(o&&w.length>=o)return p(!0)
break}}else T++}}return d()},this.abort=function(){u=!0},this.getCharIndex=function(){return a}}function l(){var e=document.getElementsByTagName("script")
return e.length?e[e.length-1].src:""}function f(){if(!C.WORKERS_SUPPORTED)return!1
if(!E&&null===C.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.")
var t=C.SCRIPT_PATH||_
t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker"
var n=new e.Worker(t)
return n.onmessage=d,n.id=L++,k[n.id]=n,n}function d(e){var t=e.data,n=k[t.workerId],r=!1
if(t.error)n.userError(t.error,t.file)
else if(t.results&&t.results.data){var i=function(){r=!0,h(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},o={abort:i,pause:p,resume:p}
if(y(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:[t.results.data[s]],errors:t.results.errors,meta:t.results.meta},o),!r);s++);delete t.results}else y(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!r&&h(t.workerId,t.results)}function h(e,t){var n=k[e]
y(n.userComplete)&&n.userComplete(t),n.terminate(),delete k[e]}function p(){throw"Not implemented."}function v(t){var n=t.data
if("undefined"==typeof C.WORKER_ID&&n&&(C.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:C.WORKER_ID,results:C.parse(n.input,n.config),finished:!0})
else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=C.parse(n.input,n.config)
r&&e.postMessage({workerId:C.WORKER_ID,results:r,finished:!0})}}function m(e){if("object"!=typeof e)return e
var t=e instanceof Array?[]:{}
for(var n in e)t[n]=m(e[n])
return t}function g(e,t){return function(){e.apply(t,arguments)}}function y(e){return"function"==typeof e}var _,b=!e.document&&!!e.postMessage,w=b&&/(\?|&)papaworker(=|&|$)/.test(e.location.search),E=!1,k={},L=0,C={}
if(C.parse=n,C.unparse=r,C.RECORD_SEP=String.fromCharCode(30),C.UNIT_SEP=String.fromCharCode(31),C.BYTE_ORDER_MARK="\ufeff",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!b&&!!e.Worker,C.SCRIPT_PATH=null,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=c,C.ParserHandle=u,C.NetworkStreamer=o,C.FileStreamer=s,C.StringStreamer=a,"undefined"!=typeof t&&t.exports?t.exports=C:y(e.define)&&e.define.amd?define(function(){return C}):e.Papa=C,e.jQuery){var I=e.jQuery
I.fn.parse=function(t){function n(){if(0==s.length)return void(y(t.complete)&&t.complete())
var e=s[0]
if(y(t.before)){var n=t.before(e.file,e.inputElem)
if("object"==typeof n){if("abort"==n.action)return void r("AbortError",e.file,e.inputElem,n.reason)
if("skip"==n.action)return void i()
"object"==typeof n.config&&(e.instanceConfig=I.extend(e.instanceConfig,n.config))}else if("skip"==n)return void i()}var o=e.instanceConfig.complete
e.instanceConfig.complete=function(t){y(o)&&o(t,e.file,e.inputElem),i()},C.parse(e.file,e.instanceConfig)}function r(e,n,r,i){y(t.error)&&t.error({name:e},n,r,i)}function i(){s.splice(0,1),n()}var o=t.config||{},s=[]
return this.each(function(t){var n="INPUT"==I(this).prop("tagName").toUpperCase()&&"file"==I(this).attr("type").toLowerCase()&&e.FileReader
if(!n||!this.files||0==this.files.length)return!0
for(var r=0;r<this.files.length;r++)s.push({file:this.files[r],inputElem:this,instanceConfig:I.extend({},o)})}),n(),this}}w?e.onmessage=v:C.WORKERS_SUPPORTED&&(_=l(),document.body?document.addEventListener("DOMContentLoaded",function(){E=!0},!0):E=!0),o.prototype=Object.create(i.prototype),o.prototype.constructor=o,s.prototype=Object.create(i.prototype),s.prototype.constructor=s,a.prototype=Object.create(a.prototype),a.prototype.constructor=a}("undefined"!=typeof window?window:this)},{}],17:[function(e,t,n){function r(e){function t(e){var t=m.substring(y).match(e)
return t?(y+=t[0].length,t[0]):null}function n(e){return e&&g.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+g}}),e}function r(){t(/^\s*/)}function i(){r()
for(var e,n=0,i=[],o=[i],a=i;e=t(/^(\()/)||t(/^(\))/)||t(/^(,)/)||t(s);){if("("===e)o.push(a),a=[],o[o.length-1].push(a),n++
else if(")"===e){if(0===a.length)return null
if(a=o.pop(),!a)return null
if(n--,0===n)break}else if(","===e)a=[],o[o.length-1].push(a)
else{if(e.split(/\s/g).some(isNaN))return null
Array.prototype.push.apply(a,e.split(/\s/g).map(parseFloat))}r()}return 0!==n?null:i}function o(){for(var e,n,i=[];n=t(s)||t(/^(,)/);)","===n?(i.push(e),e=[]):n.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,n.split(/\s/g).map(parseFloat))),r()
return e?(i.push(e),i.length?i:null):null}function a(){if(!t(/^(point(\sz)?)/i))return null
if(r(),!t(/^(\()/))return null
var e=o()
return e?(r(),t(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}function u(){if(!t(/^(multipoint)/i))return null
r()
var e=m.substring(m.indexOf("(")+1,m.length-1).replace(/\(/g,"").replace(/\)/g,"")
m="MULTIPOINT ("+e+")"
var n=i()
return n?(r(),{type:"MultiPoint",coordinates:n}):null}function c(){if(!t(/^(multilinestring)/i))return null
r()
var e=i()
return e?(r(),{type:"MultiLineString",coordinates:e}):null}function l(){if(!t(/^(linestring(\sz)?)/i))return null
if(r(),!t(/^(\()/))return null
var e=o()
return e&&t(/^(\))/)?{type:"LineString",coordinates:e}:null}function f(){if(!t(/^(polygon(\sz)?)/i))return null
r()
var e=i()
return e?{type:"Polygon",coordinates:e}:null}function d(){if(!t(/^(multipolygon)/i))return null
r()
var e=i()
return e?{type:"MultiPolygon",coordinates:e}:null}function h(){var e,n=[]
if(!t(/^(geometrycollection)/i))return null
if(r(),!t(/^(\()/))return null
for(;e=p();)n.push(e),r(),t(/^(,)/),r()
return t(/^(\))/)?{type:"GeometryCollection",geometries:n}:null}function p(){return a()||l()||f()||u()||c()||d()||h()}var v=e.split(";"),m=v.pop(),g=(v.shift()||"").split("=").pop(),y=0
return n(p())}function i(e){function t(e){return e.join(" ")}function n(e){return e.map(t).join(", ")}function r(e){return e.map(n).map(s).join(", ")}function o(e){return e.map(r).map(s).join(", ")}function s(e){return"("+e+")"}switch("Feature"===e.type&&(e=e.geometry),e.type){case"Point":return"POINT ("+t(e.coordinates)+")"
case"LineString":return"LINESTRING ("+n(e.coordinates)+")"
case"Polygon":return"POLYGON ("+r(e.coordinates)+")"
case"MultiPoint":return"MULTIPOINT ("+n(e.coordinates)+")"
case"MultiPolygon":return"MULTIPOLYGON ("+o(e.coordinates)+")"
case"MultiLineString":return"MULTILINESTRING ("+r(e.coordinates)+")"
case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(i).join(", ")+")"
default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}t.exports=r,t.exports.parse=r,t.exports.stringify=i
var o=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,s=new RegExp("^"+o.source+"(\\s"+o.source+"){1,}")},{}]},{},[2])
