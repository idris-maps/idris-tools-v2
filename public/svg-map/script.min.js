!function t(n,e,r){function o(u,a){if(!e[u]){if(!n[u]){var l="function"==typeof require&&require
if(!a&&l)return l(u,!0)
if(i)return i(u,!0)
var s=new Error("Cannot find module '"+u+"'")
throw s.code="MODULE_NOT_FOUND",s}var c=e[u]={exports:{}}
n[u][0].call(c.exports,function(t){var e=n[u][1][t]
return o(e?e:t)},c,c.exports,t,n,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u])
return o}({1:[function(t,n,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"number"==typeof t}function u(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}n.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number")
return this._maxListeners=t,this},r.prototype.emit=function(t){var n,e,r,i,l,s
if(this._events||(this._events={}),"error"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(n=arguments[1],n instanceof Error)throw n
throw TypeError('Uncaught, unspecified "error" event.')}if(e=this._events[t],a(e))return!1
if(o(e))switch(arguments.length){case 1:e.call(this)
break
case 2:e.call(this,arguments[1])
break
case 3:e.call(this,arguments[1],arguments[2])
break
default:i=Array.prototype.slice.call(arguments,1),e.apply(this,i)}else if(u(e))for(i=Array.prototype.slice.call(arguments,1),s=e.slice(),r=s.length,l=0;r>l;l++)s[l].apply(this,i)
return!0},r.prototype.addListener=function(t,n){var e
if(!o(n))throw TypeError("listener must be a function")
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(n.listener)?n.listener:n),this._events[t]?u(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,u(this._events[t])&&!this._events[t].warned&&(e=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[t].length>e&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,n){function e(){this.removeListener(t,e),r||(r=!0,n.apply(this,arguments))}if(!o(n))throw TypeError("listener must be a function")
var r=!1
return e.listener=n,this.on(t,e),this},r.prototype.removeListener=function(t,n){var e,r,i,a
if(!o(n))throw TypeError("listener must be a function")
if(!this._events||!this._events[t])return this
if(e=this._events[t],i=e.length,r=-1,e===n||o(e.listener)&&e.listener===n)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,n)
else if(u(e)){for(a=i;a-- >0;)if(e[a]===n||e[a].listener&&e[a].listener===n){r=a
break}if(0>r)return this
1===e.length?(e.length=0,delete this._events[t]):e.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,n)}return this},r.prototype.removeAllListeners=function(t){var n,e
if(!this._events)return this
if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this
if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n)
return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[t],o(e))this.removeListener(t,e)
else if(e)for(;e.length;)this.removeListener(t,e[e.length-1])
return delete this._events[t],this},r.prototype.listeners=function(t){var n
return n=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var n=this._events[t]
if(o(n))return 1
if(n)return n.length}return 0},r.listenerCount=function(t,n){return t.listenerCount(n)}},{}],2:[function(t,n,e){function r(){a.init(u)}var o=t("../../components/map-svg"),i=t("../../components/map-svg-menu"),u=new o([0,0,1,1],{width:window.innerWidth,height:window.innerHeight-200}),a=new i("menu")
window.onload=function(){r()}},{"../../components/map-svg":30,"../../components/map-svg-menu":15}],3:[function(t,n,e){var r=t("./lib/html"),o=t("./lib/init"),i=t("./lib/browse"),u=t("events").EventEmitter
n.exports=function(t,n){var e=new u
r.init(t,function(){o(e)
var n=document.getElementById("browse-btn")
n.onclick=function(){r.browse(t,function(){i(e)})}}),e.on("geojson-parsed",function(t){n(t)})}},{"./lib/browse":4,"./lib/html":5,"./lib/init":6,events:1}],4:[function(t,n,e){var r=(t("./msg"),t("./verify-dropped"))
n.exports=function(t){var n=document.getElementById("file-input")
n.onchange=function(e){r(n.files[0],t)}}},{"./msg":7,"./verify-dropped":11}],5:[function(t,n,e){e.init=function(t,n){var e=document.getElementById(t)
e.innerHTML='<div id="drop-zone"></div><p id="msg"></p><button id="browse-btn">Browse the file system</button>',n()},e.browse=function(t,n){var e=document.getElementById(t)
e.innerHTML='<p id="msg">Load a GeoJSON file</p><input id="file-input" type="file"></input>',n()}},{}],6:[function(t,n,e){function r(t,n){t.preventDefault(),u(t.dataTransfer.files[0],n)}function o(t){t.ondragover=function(t){return t.preventDefault(),!1},t.ondragenter=function(t){return t.preventDefault(),!1}}var i=t("./msg"),u=t("./verify-dropped")
n.exports=function(t){if(window.FileReader){var n=document.getElementById("drop-zone")
o(n),n.ondrop=function(n){r(n,t)},i.write("Drop a GeoJSON file"),i.add("or")}else i.write("Your browser does not support the HTML5 FileReader.")}},{"./msg":7,"./verify-dropped":11}],7:[function(t,n,e){e.write=function(t){var n=document.getElementById("msg")
n.innerHTML=t},e.add=function(t){var n=document.getElementById("msg"),e=n.innerHTML
n.innerHTML=e+"<br/>"+t}},{}],8:[function(t,n,e){n.exports=function(t,n){var e=new FileReader
e.onload=function(){n(JSON.parse(e.result))},e.readAsText(t)}},{}],9:[function(t,n,e){function r(t,n){var e=null,r=null,i=null,u=0
0!==n.points.length&&(e=n.points,u+=1),0!==n.lines.length&&(r=n.lines,u+=1),0!==n.polygons.length&&(i=n.polygons,u+=1)
var a=[]
return 1===u?e?a.push(o("point",t,e)):r?a.push(o("line",t,r)):i&&a.push(o("polygon",t,i)):(e&&a.push(o("point",t+"-points",e)),r&&a.push(o("line",t+"-lines",r)),i&&a.push(o("polygon",t+"-polygons",i))),a}function o(t,n,e){return{type:t,name:n,collection:{type:"FeatureCollection",features:e}}}function i(t,n,e,r){if(t===n.length)r(e)
else{var o=n[t],a=o.geometry.type
"Point"===a||"MultiPoint"===a?e.points.push(o):"LineString"===a||"MultiLineString"===a?e.lines.push(o):("Polygon"===a||"MultiPolygon"===a)&&e.polygons.push(o),0!==t&&Math.floor(t/100)===t/100?setTimeout(function(){u.write("Checked "+t+" of "+n.length+" geometries"),i(t+1,n,e,r)},1):i(t+1,n,e,r)}}var u=t("./msg")
n.exports=function(t,n,e){var o=n.features,a={points:[],lines:[],polygons:[]}
u.write("Checking Geometries..."),i(0,o,a,function(n){e(r(t,n))})}},{"./msg":7}],10:[function(t,n,e){var r=t("geojson-validation")
n.exports=function(t,n){"FeatureCollection"!==t.type?n(!1,["The file is not a GeoJSON FeatureCollection"]):r.valid(t,function(t,e){n(t,e)})}},{"geojson-validation":12}],11:[function(t,n,e){function r(t){var n=t.name.split("."),e=""
return n.forEach(function(t,r){r<n.length-1&&(e=0===r?t:e+"-"+t)}),e}function o(t,n){l(t,function(t,e){t?(u.write("Document is a valid GeoJSON"),n(!0)):(u.add("Document is not a valid GeoJSON"),u.add("Errors: "),e.forEach(function(t){"String"!=typeof t&&(t=t.toString()),u.add(t)}),n(!1))})}function i(t){var n=t.name.split("."),e=n[n.length-1]
return"json"===e||"geojson"===e?(u.write("Document is a JSON file"),u.add("Verifying if it is a valid GeoJSON file..."),!0):(u.write("Document is not a JSON file"),!1)}var u=t("./msg"),a=t("./read-json"),l=t("./validate-geojson"),s=t("./separate-geotypes"),c=t("idris-ensure-clockwise")
n.exports=function(t,n){u.write("Verifying document..."),i(t)&&a(t,function(e){o(e,function(o){o&&c(e,function(o){var i=r(t)
s(i,e,function(t){n.emit("geojson-parsed",t)})})})})}},{"./msg":7,"./read-json":8,"./separate-geotypes":9,"./validate-geojson":10,"idris-ensure-clockwise":45}],12:[function(t,n,e){!function(t){function n(t){return"function"==typeof t}function e(t){return t===Object(t)}function r(t,e){var r=!1
return"string"==typeof e?e=[e]:"[object Array]"===Object.prototype.toString.call(e)?0===e.length&&(r=!0):r=!0,n(t)&&(r?t(r,[]):t(r,e)),r}function o(t,e){var r
if(n(u[t])){try{r=u[t](e)}catch(o){r=["Problem with custom definition for '"+t+": "+o]}if("string"==typeof result&&(r=[r]),"[object Array]"===Object.prototype.toString.call(r))return r}return[]}function i(n,e){var o=[]
return Array.isArray(n)?(n.forEach(function(n,e){t.isPosition(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),o=o.concat(n))})}),n[0].toString()!==n[n.length-1].toString()&&o.push("The first and last positions must be equivalent"),n.length<4&&o.push("coordinates must have at least four positions")):o.push("coordinates must be an array"),r(e,o)}var u={}
t.define=function(t,e){return t in s&&n(e)?(u[t]=e,!0):!1},t.isPosition=function(t,n){var e=[]
return Array.isArray(t)?t.length<=1&&e.push("Position must be at least two elements"):e.push("Position must be an array"),e=e.concat(o("Position",t)),r(n,e)},t.isGeoJSONObject=t.valid=function(t,n){if(!e(t))return r(n,["must be a JSON Object"])
var i=[]
if("type"in t){if(a[t.type])return a[t.type](t,n)
if(l[t.type])return l[t.type](t,n)
i.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else i.push("must have a member with the name 'type'")
return i=i.concat(o("GeoJSONObject",t)),r(n,i)},t.isGeometryObject=function(t,n){if(!e(t))return r(n,["must be a JSON Object"])
var i=[]
if("type"in t){if(l[t.type])return l[t.type](t,n)
i.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else i.push("must have a member with the name 'type'")
return i=i.concat(o("GeometryObject",t)),r(n,i)},t.isPoint=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"Point"!==n.type&&u.push("type must be 'Point'"):u.push("must have a member with the name 'type'"),"coordinates"in n?t.isPosition(n.coordinates,function(t,n){t||u.push("Coordinates must be a single position")}):u.push("must have a member with the name 'coordinates'"),u=u.concat(o("Point",n)),r(i,u)},t.isMultiPointCoor=function(n,e){var o=[]
return Array.isArray(n)?n.forEach(function(n,e){t.isPosition(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),o=o.concat(n))})}):o.push("coordinates must be an array"),r(e,o)},t.isMultiPoint=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"MultiPoint"!==n.type&&u.push("type must be 'MultiPoint'"):u.push("must have a member with the name 'type'"),"coordinates"in n?t.isMultiPointCoor(n.coordinates,function(t,n){t||(u=u.concat(n))}):u.push("must have a member with the name 'coordinates'"),u=u.concat(o("MultiPoint",n)),r(i,u)},t.isLineStringCoor=function(n,e){var o=[]
return Array.isArray(n)?n.length>1?n.forEach(function(n,e){t.isPosition(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),o=o.concat(n))})}):o.push("coordinates must have at least two elements"):o.push("coordinates must be an array"),r(e,o)},t.isLineString=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"LineString"!==n.type&&u.push("type must be 'LineString'"):u.push("must have a member with the name 'type'"),"coordinates"in n?t.isLineStringCoor(n.coordinates,function(t,n){t||(u=u.concat(n))}):u.push("must have a member with the name 'coordinates'"),u=u.concat(o("LineString",n)),r(i,u)},t.isMultiLineStringCoor=function(n,e){var o=[]
Array.isArray(n)?n.forEach(function(n,e){t.isLineStringCoor(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),o=o.concat(n))})}):o.push("coordinates must be an array"),r(e,o)},t.isMultiLineString=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"MultiLineString"!==n.type&&u.push("type must be 'MultiLineString'"):u.push("must have a member with the name 'type'"),"coordinates"in n?t.isMultiLineStringCoor(n.coordinates,function(t,n){t||(u=u.concat(n))}):u.push("must have a member with the name 'coordinates'"),u=u.concat(o("MultiPoint",n)),r(i,u)},t.isPolygonCoor=function(t,n){var e=[]
return Array.isArray(t)?t.forEach(function(t,n){i(t,function(t,r){t||(r[0]="at "+n+": ".concat(r[0]),e=e.concat(r))})}):e.push("coordinates must be an array"),r(n,e)},t.isPolygon=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"Polygon"!==n.type&&u.push("type must be 'Polygon'"):u.push("must have a member with the name 'type'"),"coordinates"in n?t.isPolygonCoor(n.coordinates,function(t,n){t||(u=u.concat(n))}):u.push("must have a member with the name 'coordinates'"),u=u.concat(o("Polygon",n)),r(i,u)},t.isMultiPolygonCoor=function(n,e){var o=[]
Array.isArray(n)?n.forEach(function(n,e){t.isPolygonCoor(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),o=o.concat(n))})}):o.push("coordinates must be an array"),r(e,o)},t.isMultiPolygon=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"MultiPolygon"!==n.type&&u.push("type must be 'MultiPolygon'"):u.push("must have a member with the name 'type'"),"coordinates"in n?t.isMultiPolygonCoor(n.coordinates,function(t,n){t||(u=u.concat(n))}):u.push("must have a member with the name 'coordinates'"),u=u.concat(o("MultiPolygon",n)),r(i,u)},t.isGeometryCollection=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"GeometryCollection"!==n.type&&u.push("type must be 'GeometryCollection'"):u.push("must have a member with the name 'type'"),"geometries"in n?Array.isArray(n.geometries)?n.geometries.forEach(function(n,e){t.isGeometryObject(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),u=u.concat(n))})}):u.push("'geometries' must be an array"):u.push("must have a member with the name 'geometries'"),u=u.concat(o("GeometryCollection",n)),r(i,u)},t.isFeature=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"Feature"!==n.type&&u.push("type must be 'feature'"):u.push("must have a member with the name 'type'"),"properties"in n||u.push("must have a member with the name 'properties'"),"geometry"in n?null!==n.geometry&&t.isGeometryObject(n.geometry,function(t,n){t||(u=u.concat(n))}):u.push("must have a member with the name 'geometry'"),u=u.concat(o("Feature",n)),r(i,u)},t.isFeatureCollection=function(n,i){if(!e(n))return r(i,["must be a JSON Object"])
var u=[]
return"bbox"in n&&t.isBbox(n.bbox,function(t,n){t||(u=u.concat(n))}),"type"in n?"FeatureCollection"!==n.type&&u.push("type must be 'FeatureCollection'"):u.push("must have a member with the name 'type'"),"features"in n?Array.isArray(n.features)?n.features.forEach(function(n,e){t.isFeature(n,function(t,n){t||(n[0]="at "+e+": ".concat(n[0]),u=u.concat(n))})}):u.push("'features' must be an array"):u.push("must have a member with the name 'features'"),u=u.concat(o("FeatureCollection",n)),r(i,u)},t.isBbox=function(t,n){var e=[]
Array.isArray(t)?t.length%2!==0&&e.push("bbox, must be a 2*n array"):e.push("bbox must be an array"),e=e.concat(o("Bbox",t)),r(n,e)}
var a={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},l={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},s={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject}
t.all_types=s}("undefined"==typeof e?this.GJV={}:e)},{}],13:[function(t,n,e){function r(t,n){n.property?t.property=n.property:console.log('new Rule(x) error: x needs a "property" key'),n.type?t.type=n.type:console.log('new Rule(x) error: x needs a "type" key'),n.features?t.feats=n.features:console.log('new Rule(x) error: x needs a "features" key')}function o(t,n){var e=!1
return"="===n.operator?(i.equal(t,n),e=!0):">"===n.operator?(i.greater(t,n),e=!0):">="===n.operator?(i.greaterOrEqual(t,n),e=!0):"<"===n.operator?(i.less(t,n),e=!0):"<="===n.operator&&(i.lessOrEqual(t,n),e=!0),e}var i=t("./lib/interpret")
n.exports=function(t){var n=this
r(n,t),n.rules=[],n.data=[],n.output=function(){return{type:n.type,property:n.property,data:n.data}},n.operators=[{symbol:"=",name:"equal to"},{symbol:">",name:"greater than"},{symbol:">=",name:"equal or greater than"},{symbol:"<",name:"less than"},{symbol:"<=",name:"equal or less than"}],n.addRule=function(t){var e=o(n,t)
e&&n.rules.push(t)},n.deleteRule=function(t){n.rules.slice(t,1),n.reinterpret()},n.reinterpret=function(){n.data=[],n.rules.forEach(function(t){o(n,t)})}}},{"./lib/interpret":14}],14:[function(t,n,e){function r(t,n,e){var r=!1
t.forEach(function(t){t.propValue===n&&(t.styleValue=e,r=!0)}),r||t.push({propValue:n,styleValue:e})}e.equal=function(t,n){t.feats.forEach(function(e){e.properties[t.property]===n.propValue&&r(t.data,e.properties[t.property],n.styleValue)})},e.greater=function(t,n){t.feats.forEach(function(e){e.properties[t.property]>n.propValue&&r(t.data,e.properties[t.property],n.styleValue)})},e.greaterOrEqual=function(t,n){t.feats.forEach(function(e){e.properties[t.property]>=n.propValue&&r(t.data,e.properties[t.property],n.styleValue)})},e.less=function(t,n){t.feats.forEach(function(e){e.properties[t.property]<n.propValue&&r(t.data,e.properties[t.property],n.styleValue)})},e.lessOrEqual=function(t,n){t.feats.forEach(function(e){e.properties[t.property]<=n.propValue&&r(t.data,e.properties[t.property],n.styleValue)})}},{}],15:[function(t,n,e){var r=t("./lib/first-drop"),o=t("./lib/closed"),i=t("./lib/main"),u=t("./lib/layer"),a=t("./lib/parent-content-html"),l=t("./lib/add-layer"),s=t("./lib/label-property"),c=t("./lib/style-by-property"),f=t("./lib/style-by-property-manual"),p=t("./lib/style-by-property-num"),y=t("./lib/style-by-property-rule"),h=t("./lib/set-map-size"),d=t("./lib/set-map-bbox"),m=t("./lib/save-svg")
n.exports=function(t){var n=this
n.parentId=t,n.parentContent=a,n.parent=document.getElementById(n.parentId),n.parent.innerHTML=n.parentContent,n.divId="menu-body",n.div=document.getElementById("menu-body"),n.close=function(){o(n)},n.init=function(t){n.map=t,r(n)},n.main=function(){i(n,map)},n.layer=function(t){u(n,t)},n.addLayer=function(){l(n)},n.labelProperty=function(t){s(n,t)},n.styleByProperty=function(t){c(n,t)},n.styleByPropertyManual=function(t,e){f(n,t,e)},n.styleByPropertyNum=function(t,e){p(n,t,e)},n.styleByPropertyRule=function(t,e){y(n,t,e)},n.setMapSize=function(){h(n)},n.setMapBbox=function(){d(n)},n.saveSvg=function(){m(n)}}},{"./lib/add-layer":16,"./lib/closed":17,"./lib/first-drop":18,"./lib/label-property":19,"./lib/layer":20,"./lib/main":21,"./lib/parent-content-html":22,"./lib/save-svg":23,"./lib/set-map-bbox":24,"./lib/set-map-size":25,"./lib/style-by-property":29,"./lib/style-by-property-manual":26,"./lib/style-by-property-num":27,"./lib/style-by-property-rule":28}],16:[function(t,n,e){var r=t("../../drop-zone-geojson-for-map/index")
t("../../utils/geo")
n.exports=function(t){r(t.divId,function(n){n.forEach(function(n){t.map.addLayer({name:n.name,type:n.type,data:n.collection})}),t.close()})}},{"../../drop-zone-geojson-for-map/index":3,"../../utils/geo":36}],17:[function(t,n,e){var r=t("../../utils/dom")
n.exports=function(t){var n=document.getElementById("close-menu-div")
r.addClass(document.getElementById("menu"),"closed"),t.div.innerHTML="",n.innerHTML='<img id="open-menu" alt="Menu" src="../img/menu-icon.png"/>',document.getElementById("open-menu").onclick=function(){r.removeClass(document.getElementById("menu"),"closed"),n.innerHTML='<img id="close-menu" alt="Close menu" src="../img/close-icon.png"/>',document.getElementById("close-menu").onclick=function(){t.close()},t.main()}}},{"../../utils/dom":35}],18:[function(t,n,e){function r(){var t=document.getElementById("title")
t.parentElement.removeChild(t)}var o=t("../../drop-zone-geojson-for-map/index"),i=t("../../utils/geo")
n.exports=function(t){document.getElementById("close-menu-div").style.display="none",o(t.divId,function(n){t.map.changeBbox(i.getBbox(n[0].collection)),n.forEach(function(n){t.map.addLayer({name:n.name,type:n.type,data:n.collection})}),t.map.render("map"),r(),document.getElementById("close-menu-div").style.display="block",t.close()})}},{"../../drop-zone-geojson-for-map/index":3,"../../utils/geo":36}],19:[function(t,n,e){function r(t,n,e){var r=t.map.layers[n],o='<h2>Choose property for label</h2><select id="label-property">'
r.getProperties().forEach(function(t){o=o+'<option value="'+t+'">'+t+"</option>"}),o+='</select><button id="label-property-btn">OK</button>',t.div.innerHTML=o,e()}function o(t,n){document.getElementById("label-property-btn").onclick=function(){t.map.switchPointType(n,document.getElementById("label-property").value),t.close()}}n.exports=function(t,n){r(t,n,function(){o(t,n)})}},{}],20:[function(t,n,e){function r(t,n,e){var r=t.map.layers[n].getData(),i="<h2>"+r.name+'</h2><p><b>Layer style</b></p><table class="layer-style-table">'
for(k in r.style.layer)i=i+"<tr><td><p>"+k+'</p></td><td><input id="'+k+'" class="style-input" value="'+r.style.layer[k]+'"></td></tr>'
i=i+'</table><button id="change-style">Change layer style</button><br/><br/>'+o(t,n)+'<button id="style-by-property">Add style by property</button>',"point"===r.type&&(i+='<button id="set-type-as-label">Show as label</button>'),"label"===r.type&&(i+='<button id="set-type-as-point">Show as points</button>'),i+='<button id="delete-layer" class="red-btn">Delete layer</button>',t.div.innerHTML=i,e(r)}function o(t,n){var e="",r=t.map.layers[n].styleByFeat
return 0!==r.length&&(e+='<p><b>Style by property</b></p><table id="sbp-list"><tr class="table-head"><td>Property</td><td>Style</td><td>Remove</td></tr>',r.forEach(function(t,n){e=e+'<tr class="sbp-item"><td>'+t.property+"</td><td>"+t.type+'</td><td class="del-sbp" id="del-sbp-'+n+'">X</td></tr>'}),e+="</table><br/><br/>"),e}function u(t,n,e){var r=document.getElementsByClassName("style-input")
document.getElementById("change-style").onclick=function(){var e={}
for(i=0;i<r.length;i++)e[r[i].id]=r[i].value
t.close(),t.map.setLayerStyle(n,l(e))},document.getElementById("delete-layer").onclick=function(){t.map.removeLayer(n),t.close()},document.getElementById("style-by-property").onclick=function(){t.styleByProperty(n)},"point"===e.type&&(document.getElementById("set-type-as-label").onclick=function(){t.labelProperty(n)}),"label"===e.type&&(document.getElementById("set-type-as-point").onclick=function(){t.map.switchPointType(n),t.close()}),a(t,n)}function a(t,n){var e=t.map.layers[n].styleByFeat
if(0!==e.length){var r=document.getElementsByClassName("del-sbp"),o=[]
for(i=0;i<r.length;i++)o.push(r[i])
o.forEach(function(e,r){e.addEventListener("click",function(){t.map.removeStyleByFeature(n,r),t.close()})})}}function l(t){return t["stroke-width"]&&(t["stroke-width"]=+t["stroke-width"]),t.r&&(t.r=+t.r),t["font-size"]&&(t["font-size"]=+t["font-size"]),t["fill-opacity"]&&(t["fill-opacity"]=+t["fill-opacity"],t["fill-opacity"]>1?t["fill-opacity"]=1:t["fill-opacity"]<0&&(t["fill-opacity"]=0)),t["stroke-opacity"]&&(t["stroke-opacity"]=+t["stroke-opacity"],t["stroke-opacity"]>1?t["stroke-opacity"]=1:t["stroke-opacity"]<0&&(t["stroke-opacity"]=0)),t}n.exports=function(t,n){r(t,n,function(e){u(t,n,e)})}},{}],21:[function(t,n,e){function r(t,n){var e='<button id="add-layer">Add layer</button><button id="set-map-size">Set map size</button><button id="set-map-bbox">Set bounding box</button><button id="download-map">Download map</button><h2>Layers</h2><div id="layer-list">'
t.map.layers.forEach(function(t,n){e=e+'<div class="layer-item">'+t.name+"</div>"}),e+="</div>",t.div.innerHTML=e,n()}function o(t){var n=document.getElementsByClassName("layer-item"),e=[]
for(i=0;i<n.length;i++)e.push(n[i])
e.forEach(function(n,e){n.onclick=function(){t.layer(e)}}),document.getElementById("add-layer").onclick=function(){t.addLayer()},document.getElementById("set-map-size").onclick=function(){t.setMapSize()},document.getElementById("set-map-bbox").onclick=function(){t.setMapBbox()},document.getElementById("download-map").onclick=function(){t.saveSvg()}}n.exports=function(t){r(t,function(){o(t)})}},{}],22:[function(t,n,e){n.exports='<div id="close-menu-div"><img id="close-menu" alt="Close menu" src="../img/close-icon.png"/></div><h1 id="title">Create a map</h1><div id="menu-body"></div>'},{}],23:[function(t,n,e){function r(t,n){var e=t.map.canvas,r="<h2>Save as SVG</h2><p>The size of the SVG will be:<br/><b>width</b>: "+e.width+"<br/><b>height</b>: "+e.height+'<br/><button id="save-ok">OK</button><button id="change-save-size">Change map size</button>'
t.div.innerHTML=r,n()}function o(t){document.getElementById("save-ok").onclick=function(){u.svg("map.svg",i(t.map.outerHTML())),t.close()},document.getElementById("change-save-size").onclick=function(){t.setMapSize()}}function i(t){var n=t.substring(4)
return'<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink" '+n}var u=t("../../utils/save")
n.exports=function(t){r(t,function(){o(t)})}},{"../../utils/save":42}],24:[function(t,n,e){function r(t,n){var e=t.map.bbox,r='<h2>Set bounding box</h2><p><b>Min. long.</b></p><input id="map-bbox-minlong" value="'+e[0]+'" type="number" /><p><b>Min. lat.</b></p><input id="map-bbox-minlat" value="'+e[1]+'" type="number" /><p><b>Max. long.</b></p><input id="map-bbox-maxlong" value="'+e[2]+'" type="number" /><p><b>Max. lat.</b></p><input id="map-bbox-maxlat" value="'+e[3]+'" type="number" /><button id="map-bbox-btn">OK</button>'
t.div.innerHTML=r,n(e)}function o(t,n){document.getElementById("map-bbox-btn").onclick=function(){var e=document.getElementById("map-bbox-minlong").value,r=document.getElementById("map-bbox-minlat").value,o=document.getElementById("map-bbox-maxlong").value,i=document.getElementById("map-bbox-maxlat").value
isNaN(e)||isNaN(r)||isNaN(o)||isNaN(i)||(+e!==n[0]||+r!==n[1]||+o!==n[2]||+i!==n[3]?(t.map.changeBbox([+e,+r,+o,+i]),t.close()):t.close())}}n.exports=function(t){r(t,function(n){o(t,n)})}},{}],25:[function(t,n,e){function r(t,n){var e=t.map.canvas,r='<h2>Set map size</h2><p><b>Width</b></p><input id="map-size-width" value="'+e.width+'" type="number" /><p><b>Height</b></p><input id="map-size-height" value="'+e.height+'" type="number" /><button id="map-size-btn">OK</button>'
t.div.innerHTML=r,n(e)}function o(t,n){document.getElementById("map-size-btn").onclick=function(){var e=document.getElementById("map-size-width").value,r=document.getElementById("map-size-height").value
isNaN(e)||isNaN(r)||(+e!==n.width||+r!==n.height?(t.map.changeCanvas({width:+e,height:+r}),t.close()):t.close())}}n.exports=function(t){r(t,function(n){o(t,n)})}},{}],26:[function(t,n,e){function r(t,n,e,r){var o=t.map.layers[n].style[e.type],i=t.map.layers[n].getUniqPropertyValues(e.property),u='<h2>"'+e.type+'" by "'+e.property+'"</h2>'
i.forEach(function(t){u=u+'<div class="sbp-item"><p class="sbp-item-label">'+t+'</p><input class="sbp-item-input" id="sbp-item-input-'+t+'" value="'+o+'"></div>'}),u+='<button id="sbp-submit">Done</button>',t.div.innerHTML=u,r(o)}function o(t,n,e,r){var o=document.getElementsByClassName("sbp-item-input")
document.getElementById("sbp-submit").onclick=function(){var i=u(o,e,r)
t.map.addStyleByFeature(n,i),t.close()}}function u(t,n,e){var r=[]
for(i=0;i<t.length;i++){var o=t[i]
r.push({propValue:o.id.split("sbp-item-input-")[1],styleValue:o.value})}return a(r,n,e)}function a(t,n,e){var r={property:n.property,type:n.type,data:[]}
return t.forEach(function(t){t.styleValue!==e&&r.data.push(t)}),r}n.exports=function(t,n,e){r(t,n,e,function(r){o(t,n,e,r)})}},{}],27:[function(t,n,e){function r(t,n,e,r){var o="<h2>Style by property</h2><p><b>"+e.property+'</b> is numeric</p><button id="by-scale">Style by rules</button><button id="manual">Style by hand</button>'
t.div.innerHTML=o,r()}function o(t,n,e){document.getElementById("by-scale").onclick=function(){t.styleByPropertyRule(n,e)},document.getElementById("manual").onclick=function(){t.styleByPropertyManual(n,e)}}n.exports=function(t,n,e){r(t,n,e,function(){o(t,n,e)})}},{}],28:[function(t,n,e){function r(t,n,e,r){var o="<h2>Style by rule</h2><p>property: <b>"+e.property+"</b><br/>style: <b>"+e.type+'</b></p><div id="sbp-rules">'+u(e)+"</div>"+a(e)+'<div id="sbp-rules-form">'+i(t,n,e)+"</div></div>"
console.log(o),t.div.innerHTML=o,r()}function o(t,n,e){document.getElementById("add-sbp-rule").onclick=function(){document.getElementById("rule-value-input").value&&document.getElementById("rule-style-input").value&&(e.addRule({propValue:+document.getElementById("rule-value-input").value,styleValue:document.getElementById("rule-style-input").value,operator:document.getElementById("rule-operator-input").value}),r(t,n,e,function(){o(t,n,e)}))},0!==e.rules.length&&(document.getElementById("save-sbp-rules").onclick=function(){console.log(n,e.output()),t.map.addStyleByFeature(n,e.output()),t.close()})}function i(t,n,e){var r='<p><b>Add a rule</b></p><p>Operator</p><select id="rule-operator-input">'
return e.operators.forEach(function(t){r=r+'<option value="'+t.symbol+'">'+t.name+"</option>"}),r=r+'</select><p>Value</p><input id="rule-value-input" placeholder="'+e.property+' value" type="number" /><p>Style</p><input id="rule-style-input" placeholder="'+e.type+' value" /><button id="add-sbp-rule">Add a rule</button>'}function u(t){if(0!==t.rules.length){var n='<p><b>Rules</b></p><table><tr class="table-head"><td>Operator</td><td>Value</td><td>Style</td>'
return t.rules.forEach(function(t){n=n+"<tr><td>"+t.operator+"</td><td>"+t.propValue+"</td><td>"+t.styleValue+"</td>"}),n+="</tr></table>"}return""}function a(t){return 0!==t.rules.length?'<button id="save-sbp-rules">Apply rules</button>':""}var l=(t("../../utils/math"),t("../../map-style-by-rule"))
n.exports=function(t,n,e){var i=new l({type:e.type,property:e.property,features:t.map.layers[n].feats})
r(t,n,i,function(){o(t,n,i)})}},{"../../map-style-by-rule":13,"../../utils/math":41}],29:[function(t,n,e){function r(t,n,e){var r='<h2>Style by property</h2><p><b>Choose property</b></p><select id="property-to-style-after">'+o(t,n)+'</select><p><b>Choose what to style</b></p><select id="style-property">'+i(t,n)+'</select><button id="property-to-style-btn">OK</button>'
t.div.innerHTML=r,e()}function o(t,n){var e="",r=t.map.layers[n].getProperties()
return r.forEach(function(t){e=e+'<option value="'+t+'">'+t+"</option>"}),e}function i(t,n){var e="",r=t.map.layers[n].style,o=[]
for(k in r)o.push(k)
return o.forEach(function(t){e=e+'<option value="'+t+'">'+t+"</option>"}),e}function u(t,n){document.getElementById("property-to-style-btn").onclick=function(){var e=document.getElementById("property-to-style-after").value,r=document.getElementById("style-property").value,o={property:e,type:r}
t.map.layers[n].propertyIsNumeric(e)?t.styleByPropertyNum(n,o):t.styleByPropertyManual(n,o)}}n.exports=function(t,n){r(t,n,function(){u(t,n)})}},{}],30:[function(t,n,e){function r(t){var n=i.fromBbox(t.bbox,t.canvas)
t.projection=n.projection,t.path=n.path}function o(t){return t[0]<-179&&(t[0]=-179),t[1]<-85&&(t[1]=-85),t[2]>179&&(t[2]=179),t[3]>85&&(t[3]=85),t}var i=t("./lib/get-projection"),u=t("./lib/Layer")
n.exports=function(t,n){var e=this
e.bbox=o(t),e.canvas=n,r(e),e.changeBbox=function(t){e.bbox=o(t),r(e),e.redraw()},e.changeCanvas=function(t){e.canvas=t,r(e),e.redraw()},e.layers=[],e.addLayer=function(t){var n=new u(t)
e.layers.push(n),e.redraw()},e.removeLayer=function(t){e.layers.splice(t,1),e.redraw()},e.outerHTML=function(){var t='<svg width="'+e.canvas.width+'" height="'+e.canvas.height+'">'
return e.layers.forEach(function(n){t+=n.outerHTML(e.projection,e.path)}),t+="</svg>"},e.rendered=!1,e.render=function(t){e.renderDivId=t
var n=document.getElementById(t)
n.innerHTML=e.outerHTML(),e.rendered=!0},e.redraw=function(){e.rendered&&e.render(e.renderDivId)},e.destroy=function(){if(e.rendered){for(var t=document.getElementById(e.renderDivId);t.firstChild;)t.removeChild(t.firstChild)
e.rendered=!1}},e.setLayerStyle=function(t,n){e.layers[t].setLayerStyle(n),e.redraw()},e.addStyleByFeature=function(t,n){e.layers[t].addStyleByFeature(n),e.redraw()},e.removeStyleByFeature=function(t,n){e.layers[t].removeStyleByFeature(n),e.redraw()},e.switchPointType=function(t,n){e.layers[t].switchPointType(n),e.redraw()},e.getLayerProperties=function(t){return e.layers[t].getProperties()},e.getLayerPropertyValues=function(t,n){return e.layers[t].getPropertyValues(n)},e.getLayerUniqPropertyValues=function(t,n){return e.layers[t].getUniqPropertyValues(n)},e.layerPropertyIsNumeric=function(t,n){return e.layers[t].propertyIsNumeric(n)},e.getLayersData=function(){var t=[]
return e.layers.forEach(function(n){t.push(n.getData())}),t}}},{"./lib/Layer":31,"./lib/get-projection":33}],31:[function(t,n,e){function r(t,n,e){if("point"===t.type)var r=l.points(t,n)
else if("label"===t.type)var r=l.label(t,n)
else var r=l.other(t,e)
var o='<g id="'+t.name+'" '
for(k in t.style)"r"!==k&&(o=o+k+'="'+t.style[k]+'" ')
return o+">"+r+"</g>"}function o(t,n){if(t.name=n.name,n.type&&i(n.type)&&(t.type=n.type),"point"===t.type?t.style=a.point():"label"===t.type?(t.style=a.label(),t.labelProperty=n.property):"line"===t.type?t.style=a.line():t.style=a.polygon(),t.styleByFeat=[],n.style){if(n.style.layer)for(k in n.style.layer)t.style[k]=n.style.layer[k]
n.style.byFeature&&(t.styleByFeat=n.style.byFeature)}n.data&&u(n.data)&&(t.feats=n.data.features)}function i(t){return"point"===t||"label"===t||"line"===t||"polygon"===t?!0:(console.log('Layer type "'+t+'" is not valid, use "point", "label", "line" or "polygon"'),!1)}function u(t){return"FeatureCollection"===t.type&&0!==t.features.length?!0:(console.log("Layer data must be a GeoJSON FeatureCollection"),!1)}var a=t("./style-defaults"),l=t("./draw"),s=t("../../utils/geo")
n.exports=function(t){var n=this
o(n,t),n.outerHTML=function(t,e){return r(n,t,e)},n.setLayerStyle=function(t){for(k in t)n.style[k]=t[k]},n.addStyleByFeature=function(t){n.styleByFeat.push(t)},n.removeStyleByFeature=function(t){n.styleByFeat.splice(t,1)},n.switchPointType=function(t){"point"===n.type?(n.type="label",n.style=a.label(),n.labelProperty=t):"label"===n.type&&(n.type="point",n.style=a.point(),n.labelProperty=void 0)},n.getProperties=function(){return s.getAllProperties(n.feats)},n.getPropertyValues=function(t){return s.getPropertyValues(n.feats,t)},n.getUniqPropertyValues=function(t){return s.getUniqPropertyValues(n.feats,t)},n.propertyIsNumeric=function(t){return s.numericValues(n.feats,t)},n.getLayerStyle=function(){return n.style},n.getStyleByFeature=function(){return n.styleByFeat},n.getData=function(){var t={type:n.type,name:n.name,data:{type:"FeatureCollection",features:n.feats},style:{layer:n.style,byFeature:n.styleByFeat}}
return"label"===n.type&&(t.property=n.labelProperty),t}}},{"../../utils/geo":36,"./draw":32,"./style-defaults":34}],32:[function(t,n,e){function r(t){var n=[]
return t.forEach(function(t){var e=t.geometry.type
if("Point"===e)n.push(t)
else if("MultiPoint"===e){var r=t.properties,o=t.geometry.coordinates
o.forEach(function(t){n.push({type:"Feature",properties:r,geometry:{type:"Point",coordinates:t}})})}}),n}function o(t){var n=[]
return t.forEach(function(t){var e=t.geometry.type;("LineString"===e||"MultiLineString"===e||"Polygon"===e||"MultiPolygon"===e)&&n.push(t)}),n}e.points=function(t,n){var e=r(t.feats),o=""
return e.forEach(function(e){var r=t.style.r,i=""
t.styleByFeat&&t.styleByFeat.forEach(function(t){t.data.forEach(function(n){e.properties[t.property]===n.propValue&&("r"===t.type?r=n.styleValue:i=i+t.type+'="'+n.styleValue+'" ')})})
var u=n(e.geometry.coordinates)
o=o+'<circle cx="'+u[0]+'" cy="'+u[1]+'" r="'+r+'" '+i+" ></circle>"}),o},e.label=function(t,n){var e=r(t.feats),o=""
return e.forEach(function(e){var r=""
t.styleByFeat&&t.styleByFeat.forEach(function(t){t.data.forEach(function(n){e.properties[t.property]===n.propValue&&(r=r+t.type+'="'+n.styleValue+'" ')})})
var i=n(e.geometry.coordinates),u=e.properties[t.labelProperty]
o=o+'<text x="'+i[0]+'" y="'+i[1]+'" '+r+" >"+u+"</text>"}),o},e.other=function(t,n){var e=o(t.feats),r=""
return e.forEach(function(e){r=r+'<path d="'+n(e)+'" ',t.styleByFeat&&t.styleByFeat.forEach(function(t){t.data.forEach(function(n){e.properties[t.property]===n.propValue&&(r=r+t.type+'="'+n.styleValue+'" ')})}),r+="></path>"}),r}},{}],33:[function(t,n,e){function r(t,n){var e=i.geoMercator().scale(1).translate([0,0]),r=i.geoPath().projection(e),o=r.bounds(t),u=.95/Math.max((o[1][0]-o[0][0])/n.width,(o[1][1]-o[0][1])/n.height),a=[(n.width-u*(o[1][0]+o[0][0]))/2,(n.height-u*(o[1][1]+o[0][1]))/2]
return e.scale(u).translate(a),{projection:e,path:r}}function o(t){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t[0],t[1]]}},{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t[2],t[3]]}}]}}var i=t("d3-geo")
e.fromCollection=function(t,n){return r(t,n)},e.fromBbox=function(t,n){return r(o(t),n)}},{"d3-geo":44}],34:[function(t,n,e){e.polygon=function(){return{fill:"#a6cee3","fill-opacity":.5,stroke:"#1f78b4","stroke-width":1,"stroke-opacity":1}},e.line=function(){return{fill:"none",stroke:"#33a02c","stroke-width":1,"stroke-opacity":1}},e.point=function(){return{r:5,fill:"#fb9a99","fill-opacity":.5,stroke:"#e31a1c","stroke-width":1,"stroke-opacity":1}},e.label=function(){return{fill:"black","font-family":"arial, helvetica, sans-serif","font-size":10,"text-anchor":"middle"}}},{}],35:[function(t,n,e){function r(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function o(t,n){t.classList?t.classList.add(n):r(t,n)||(t.className+=" "+n)}function i(t,n){if(t.classList)t.classList.remove(n)
else if(r(t,n)){var e=new RegExp("(\\s|^)"+n+"(\\s|$)")
t.className=t.className.replace(e," ")}}e.addClass=function(t,n){o(t,n)},e.removeClass=function(t,n){i(t,n)}},{}],36:[function(t,n,e){var r=t("./lib/utils"),o=t("./lib/get-all-points")
e.getAllPoints=function(t){return"FeatureCollection"===t.type?o.fromFeatureCollection(t):"Feature"===t.type?o.fromFeature(t):r.isGeom(t)?o.fromGeometry(t):void 0}
var i=t("./lib/get-bbox")
e.getBbox=function(t){return"FeatureCollection"===t.type?i.fromFeatureCollection(t):"Feature"===t.type?i.fromFeature(t):r.isGeom(t)?i.fromGeometry(t):void 0}
var u=t("./lib/properties")
e.getAllProperties=function(t){return u.getAll(t)},e.getPropertyValues=function(t,n){return u.getValues(t,n)},e.getUniqPropertyValues=function(t,n){return u.getUniqValues(t,n)},e.numericValues=function(t,n){return u.numericValues(t,n)},e.propInfo=function(t){return u.propInfo(t.features)}},{"./lib/get-all-points":37,"./lib/get-bbox":38,"./lib/properties":39,"./lib/utils":40}],37:[function(t,n,e){function r(t){var n=t
if("Point"===n.type)return[n.coordinates]
if("LineString"===n.type||"MultiPoint"===n.type)return n.coordinates
if("Polygon"===n.type||"MultiLineString"===n.type){var e=[]
return n.coordinates.forEach(function(t){t.forEach(function(t){e.push(t)})}),e}if("MultiPolygon"===n.type){var e=[]
return n.coordinates.forEach(function(t){t.forEach(function(t){t.forEach(function(t){e.push(t)})})}),e}console.log('point-array ERROR: "'+n.type+'" is not a valid geometry type')}e.fromFeature=function(t){return r(t.geometry)},e.fromGeometry=function(t){return r(t)},e.fromFeatureCollection=function(t){var n=[]
return t.features.forEach(function(t){var e=r(t.geometry)
e.forEach(function(t){n.push(t)})}),n}},{}],38:[function(t,n,e){function r(t){var n={min:1/0,max:-(1/0)},e={min:1/0,max:-(1/0)}
return t.forEach(function(t){t[0]>n.max&&(n.max=t[0]),t[0]<n.min&&(n.min=t[0]),t[1]>e.max&&(e.max=t[1]),t[1]<e.min&&(e.min=t[1])}),[n.min,e.min,n.max,e.max]}var o=t("./get-all-points")
e.fromFeature=function(t){return r(o.fromFeature(t))},e.fromFeatureCollection=function(t){return r(o.fromFeatureCollection(t))},e.fromGeometry=function(t){return r(o.fromGeometry(t))}},{"./get-all-points":37}],39:[function(t,n,e){function r(t){var n=[]
for(k in t[0].properties)n.push(k)
return n}function i(t,n){var e=[]
return t.forEach(function(t){e.push(t.properties[n])}),e.sort(function(t,n){return t-n})}function u(t,n){var e=[]
return t.forEach(function(t){e.push(t.properties[n])}),l.uniq(e)}function a(t,n){var e=!0
return t.forEach(function(t){t.properties[n]&&isNaN(t.properties[n])&&(e=!1)}),e}var l=t("./utils")
e.getAll=function(t){return r(t)},e.getValues=function(t,n){return i(t,n)},e.getUniqValues=function(t,n){return u(t,n)},e.numericValues=function(t,n){return a(t,n)},e.propInfo=function(t){var n=[],e=geo.getAllProperties(o.feats)
return e.forEach(function(t){var e={key:t,uniqValues:u(o.feats,t),isNum:a(o.feats,t)}
e.maxValue=e.uniqValues[0],e.minValue=e.uniqValues[e.uniqValues.length-1],e.nbUniqValues=e.uniqValues.length,n.push(e)}),n}},{"./utils":40}],40:[function(t,n,e){e.isGeom=function(t){var n=!1,e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]
return e.forEach(function(e){t.type===e&&(n=!0)}),n},e.uniq=function(t){var n=[],e=!0
return t.forEach(function(t){isNaN(t)&&(e=!1)
var r=!1
n.forEach(function(n){t===n&&(r=!0)}),r||n.push(t)}),e&&(n=n.map(function(t){return+t})),n.sort(function(t,n){return t>n?1:-1}),n}},{}],41:[function(t,n,e){function r(t){t.sort(function(t,n){return t-n})
var n=Math.floor(t.length/2)
return t.length%2?t[n]:(t[n-1]+t[n])/2}function o(t){var n=0
return t.forEach(function(t){isNaN(t)||(n+=t)}),n}function i(t){var n=o(t)
return n/t.length}function u(t){var n={max:-(1/0),min:1/0}
return t.forEach(function(t){isNaN(t)||(t>n.max&&(n.max=t),t<n.min&&(n.min=t))}),n}e.median=function(t){return r(t)},e.sum=function(t){return o(t)},e.mean=function(t){return i(t)},e.minMax=function(t){return u(t)}},{}],42:[function(t,n,e){var r=r||function(t){"use strict"
if(!("undefined"==typeof t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var n=t.document,e=function(){return t.URL||t.webkitURL||t},r=n.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=function(t){var n=new MouseEvent("click")
t.dispatchEvent(n)},u=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(n){(t.setImmediate||t.setTimeout)(function(){throw n},0)},s="application/octet-stream",c=4e4,f=function(t){var n=function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()}
setTimeout(n,c)},p=function(t,n,e){n=[].concat(n)
for(var r=n.length;r--;){var o=t["on"+n[r]]
if("function"==typeof o)try{o.call(t,e||t)}catch(i){l(i)}}},y=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},h=function(n,l,c){c||(n=y(n))
var h,d=this,m=n.type,g=m===s,v=function(){p(d,"writestart progress write writeend".split(" "))},b=function(){if((a||g&&u)&&t.FileReader){var r=new FileReader
return r.onloadend=function(){var n=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;"),e=t.open(n,"_blank")
e||(t.location.href=n),n=void 0,d.readyState=d.DONE,v()},r.readAsDataURL(n),void(d.readyState=d.INIT)}if(h||(h=e().createObjectURL(n)),g)t.location.href=h
else{var o=t.open(h,"_blank")
o||(t.location.href=h)}d.readyState=d.DONE,v(),f(h)}
return d.readyState=d.INIT,o?(h=e().createObjectURL(n),void setTimeout(function(){r.href=h,r.download=l,i(r),v(),f(h),d.readyState=d.DONE})):void b()},d=h.prototype,m=function(t,n,e){return new h(t,n||t.name||"download",e)}
return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,n,e){return n=n||t.name||"download",e||(t=y(t)),navigator.msSaveOrOpenBlob(t,n)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content)
"undefined"!=typeof n&&n.exports?n.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return r}),e.json=function(t,n){var e=new Blob([JSON.stringify(n)],{type:"application/json;charset=utf-8"})
r(e,t)},e.text=function(t,n){var e=new Blob([n],{type:"text/plain;charset=utf-8"})
r(e,t)},e.svg=function(t,n){var e=new Blob([n],{type:"image/svg+xml;charset=utf-8"})
r(e,t)},e.blob=function(t,n){r(n,t)}},{}],43:[function(t,n,e){!function(t,r){"object"==typeof e&&"undefined"!=typeof n?r(e):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict"
function n(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function e(t){return 1===t.length&&(t=r(t)),{left:function(n,e,r,o){for(null==r&&(r=0),null==o&&(o=n.length);o>r;){var i=r+o>>>1
t(n[i],e)<0?r=i+1:o=i}return r},right:function(n,e,r,o){for(null==r&&(r=0),null==o&&(o=n.length);o>r;){var i=r+o>>>1
t(n[i],e)>0?o=i:r=i+1}return r}}}function r(t){return function(e,r){return n(t(e),r)}}function o(t,n){return t>n?-1:n>t?1:n>=t?0:NaN}function i(t){return null===t?NaN:+t}function u(t,n){var e,r,o=t.length,u=0,a=0,l=-1,s=0
if(null==n)for(;++l<o;)isNaN(e=i(t[l]))||(r=e-u,u+=r/++s,a+=r*(e-u))
else for(;++l<o;)isNaN(e=i(n(t[l],l,t)))||(r=e-u,u+=r/++s,a+=r*(e-u))
return s>1?a/(s-1):void 0}function a(t,n){var e=u(t,n)
return e?Math.sqrt(e):e}function l(t,n){var e,r,o,i=-1,u=t.length
if(null==n){for(;++i<u;)if(null!=(r=t[i])&&r>=r){e=o=r
break}for(;++i<u;)null!=(r=t[i])&&(e>r&&(e=r),r>o&&(o=r))}else{for(;++i<u;)if(null!=(r=n(t[i],i,t))&&r>=r){e=o=r
break}for(;++i<u;)null!=(r=n(t[i],i,t))&&(e>r&&(e=r),r>o&&(o=r))}return[e,o]}function s(t){return function(){return t}}function c(t){return t}function f(t,n,e){t=+t,n=+n,e=(o=arguments.length)<2?(n=t,t=0,1):3>o?1:+e
for(var r=-1,o=0|Math.max(0,Math.ceil((n-t)/e)),i=new Array(o);++r<o;)i[r]=t+r*e
return i}function p(t,n,e){var r=y(t,n,e)
return f(Math.ceil(t/r)*r,Math.floor(n/r)*r+r/2,r)}function y(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o
return i>=T?o*=10:i>=q?o*=5:i>=R&&(o*=2),t>n?-o:o}function h(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function d(){function t(t){var o,i,u=t.length,a=new Array(u)
for(o=0;u>o;++o)a[o]=n(t[o],o,t)
var l=e(a),s=l[0],c=l[1],f=r(a,s,c)
Array.isArray(f)||(f=p(s,c,f))
for(var y=f.length;f[0]<=s;)f.shift(),--y
for(;f[y-1]>=c;)f.pop(),--y
var h,d=new Array(y+1)
for(o=0;y>=o;++o)h=d[o]=[],h.x0=o>0?f[o-1]:s,h.x1=y>o?f[o]:c
for(o=0;u>o;++o)i=a[o],i>=s&&c>=i&&d[I(f,i,0,y)].push(t[o])
return d}var n=c,e=l,r=h
return t.value=function(e){return arguments.length?(n="function"==typeof e?e:s(e),t):n},t.domain=function(n){return arguments.length?(e="function"==typeof n?n:s([n[0],n[1]]),t):e},t.thresholds=function(n){return arguments.length?(r="function"==typeof n?n:s(Array.isArray(n)?j.call(n):n),t):r},t}function m(t,n,e){if(null==e&&(e=i),r=t.length){if((n=+n)<=0||2>r)return+e(t[0],0,t)
if(n>=1)return+e(t[r-1],r-1,t)
var r,o=(r-1)*n,u=Math.floor(o),a=+e(t[u],u,t),l=+e(t[u+1],u+1,t)
return a+(l-a)*(o-u)}}function g(t,e,r){return t=V.call(t,i).sort(n),Math.ceil((r-e)/(2*(m(t,.75)-m(t,.25))*Math.pow(t.length,-1/3)))}function v(t,n,e){return Math.ceil((e-n)/(3.5*a(t)*Math.pow(t.length,-1/3)))}function b(t,n){var e,r,o=-1,i=t.length
if(null==n){for(;++o<i;)if(null!=(r=t[o])&&r>=r){e=r
break}for(;++o<i;)null!=(r=t[o])&&r>e&&(e=r)}else{for(;++o<i;)if(null!=(r=n(t[o],o,t))&&r>=r){e=r
break}for(;++o<i;)null!=(r=n(t[o],o,t))&&r>e&&(e=r)}return e}function E(t,n){var e,r=0,o=t.length,u=-1,a=o
if(null==n)for(;++u<o;)isNaN(e=i(t[u]))?--a:r+=e
else for(;++u<o;)isNaN(e=i(n(t[u],u,t)))?--a:r+=e
return a?r/a:void 0}function x(t,e){var r,o=[],u=t.length,a=-1
if(null==e)for(;++a<u;)isNaN(r=i(t[a]))||o.push(r)
else for(;++a<u;)isNaN(r=i(e(t[a],a,t)))||o.push(r)
return m(o.sort(n),.5)}function S(t){for(var n,e,r,o=t.length,i=-1,u=0;++i<o;)u+=t[i].length
for(e=new Array(u);--o>=0;)for(r=t[o],n=r.length;--n>=0;)e[--u]=r[n]
return e}function w(t,n){var e,r,o=-1,i=t.length
if(null==n){for(;++o<i;)if(null!=(r=t[o])&&r>=r){e=r
break}for(;++o<i;)null!=(r=t[o])&&e>r&&(e=r)}else{for(;++o<i;)if(null!=(r=n(t[o],o,t))&&r>=r){e=r
break}for(;++o<i;)null!=(r=n(t[o],o,t))&&e>r&&(e=r)}return e}function M(t){for(var n=0,e=t.length-1,r=t[0],o=new Array(0>e?0:e);e>n;)o[n]=[r,r=t[++n]]
return o}function P(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]]
return r}function L(t,e){if(r=t.length){var r,o,i=0,u=0,a=t[u]
for(e||(e=n);++i<r;)(e(o=t[i],a)<0||0!==e(a,a))&&(a=o,u=i)
return 0===e(a,a)?u:void 0}}function N(t,n,e){for(var r,o,i=(null==e?t.length:e)-(n=null==n?0:+n);i;)o=Math.random()*i--|0,r=t[i+n],t[i+n]=t[o+n],t[o+n]=r
return t}function B(t,n){var e,r=0,o=t.length,i=-1
if(null==n)for(;++i<o;)(e=+t[i])&&(r+=e)
else for(;++i<o;)(e=+n(t[i],i,t))&&(r+=e)
return r}function k(t){if(!(o=t.length))return[]
for(var n=-1,e=w(t,_),r=new Array(e);++n<e;)for(var o,i=-1,u=r[n]=new Array(o);++i<o;)u[i]=t[i][n]
return r}function _(t){return t.length}function C(){return k(arguments)}var O=e(n),I=O.right,F=O.left,A=Array.prototype,j=A.slice,V=A.map,T=Math.sqrt(50),q=Math.sqrt(10),R=Math.sqrt(2)
t.bisect=I,t.bisectRight=I,t.bisectLeft=F,t.ascending=n,t.bisector=e,t.descending=o,t.deviation=a,t.extent=l,t.histogram=d,t.thresholdFreedmanDiaconis=g,t.thresholdScott=v,t.thresholdSturges=h,t.max=b,t.mean=E,t.median=x,t.merge=S,t.min=w,t.pairs=M,t.permute=P,t.quantile=m,t.range=f,t.scan=L,t.shuffle=N,t.sum=B,t.ticks=p,t.tickStep=y,t.transpose=k,t.variance=u,t.zip=C,Object.defineProperty(t,"__esModule",{value:!0})})},{}],44:[function(t,n,e){!function(r,o){"object"==typeof e&&"undefined"!=typeof n?o(e,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],o):o(r.d3=r.d3||{},r.d3)}(this,function(t,n){"use strict"
function e(){this.reset()}function r(t,n,e){var r=t.s=n+e,o=r-n,i=r-o
t.t=n-i+(e-o)}function o(t){return t>1?0:-1>t?An:Math.acos(t)}function i(t){return t>1?jn:-1>t?-jn:Math.asin(t)}function u(t){return(t=$n(t/2))*t}function a(){}function l(t,n){t&&te.hasOwnProperty(t.type)&&te[t.type](t,n)}function s(t,n,e){var r,o=-1,i=t.length-e
for(n.lineStart();++o<i;)r=t[o],n.point(r[0],r[1],r[2])
n.lineEnd()}function c(t,n){var e=-1,r=t.length
for(n.polygonStart();++e<r;)s(t[e],n,1)
n.polygonEnd()}function f(){oe.point=y}function p(){h(tn,nn)}function y(t,n){oe.point=h,tn=t,nn=n,t*=Rn,n*=Rn,en=t,rn=Dn(n=n/2+Vn),on=$n(n)}function h(t,n){t*=Rn,n*=Rn,n=n/2+Vn
var e=t-en,r=e>=0?1:-1,o=r*e,i=Dn(n),u=$n(n),a=on*u,l=rn*i+a*Dn(o),s=a*r*$n(o)
ee.add(Hn(s,l)),en=t,rn=i,on=u}function d(t){return[Hn(t[1],t[0]),i(t[2])]}function m(t){var n=t[0],e=t[1],r=Dn(e)
return[r*Dn(n),r*$n(n),$n(e)]}function g(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function v(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function b(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function E(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function x(t){var n=Yn(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])
t[0]/=n,t[1]/=n,t[2]/=n}function S(t,n){hn.push(dn=[un=t,ln=t]),an>n&&(an=n),n>sn&&(sn=n)}function w(t,n){var e=m([t*Rn,n*Rn])
if(yn){var r=v(yn,e),o=[r[1],-r[0],0],i=v(o,r)
x(i),i=d(i)
var u,a=t-cn,l=a>0?1:-1,s=i[0]*qn*l,c=Gn(a)>180
c^(s>l*cn&&l*t>s)?(u=i[1]*qn,u>sn&&(sn=u)):(s=(s+360)%360-180,c^(s>l*cn&&l*t>s)?(u=-i[1]*qn,an>u&&(an=u)):(an>n&&(an=n),n>sn&&(sn=n))),c?cn>t?k(un,t)>k(un,ln)&&(ln=t):k(t,ln)>k(un,ln)&&(un=t):ln>=un?(un>t&&(un=t),t>ln&&(ln=t)):t>cn?k(un,t)>k(un,ln)&&(ln=t):k(t,ln)>k(un,ln)&&(un=t)}else S(t,n)
yn=e,cn=t}function M(){ae.point=w}function P(){dn[0]=un,dn[1]=ln,ae.point=S,yn=null}function L(t,n){if(yn){var e=t-cn
ue.add(Gn(e)>180?e+(e>0?360:-360):e)}else fn=t,pn=n
oe.point(t,n),w(t,n)}function N(){oe.lineStart()}function B(){L(fn,pn),oe.lineEnd(),Gn(ue)>In&&(un=-(ln=180)),dn[0]=un,dn[1]=ln,yn=null}function k(t,n){return(n-=t)<0?n+360:n}function _(t,n){return t[0]-n[0]}function C(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function O(t,n){t*=Rn,n*=Rn
var e=Dn(n)
I(e*Dn(t),e*$n(t),$n(n))}function I(t,n,e){++mn,vn+=(t-vn)/mn,bn+=(n-bn)/mn,En+=(e-En)/mn}function F(){se.point=A}function A(t,n){t*=Rn,n*=Rn
var e=Dn(n)
kn=e*Dn(t),_n=e*$n(t),Cn=$n(n),se.point=j,I(kn,_n,Cn)}function j(t,n){t*=Rn,n*=Rn
var e=Dn(n),r=e*Dn(t),o=e*$n(t),i=$n(n),u=Hn(Yn((u=_n*i-Cn*o)*u+(u=Cn*r-kn*i)*u+(u=kn*o-_n*r)*u),kn*r+_n*o+Cn*i)
gn+=u,xn+=u*(kn+(kn=r)),Sn+=u*(_n+(_n=o)),wn+=u*(Cn+(Cn=i)),I(kn,_n,Cn)}function V(){se.point=O}function T(){se.point=R}function q(){G(Nn,Bn),se.point=O}function R(t,n){Nn=t,Bn=n,t*=Rn,n*=Rn,se.point=G
var e=Dn(n)
kn=e*Dn(t),_n=e*$n(t),Cn=$n(n),I(kn,_n,Cn)}function G(t,n){t*=Rn,n*=Rn
var e=Dn(n),r=e*Dn(t),i=e*$n(t),u=$n(n),a=_n*u-Cn*i,l=Cn*r-kn*u,s=kn*i-_n*r,c=Yn(a*a+l*l+s*s),f=kn*r+_n*i+Cn*u,p=c&&-o(f)/c,y=Hn(c,f)
Mn+=p*a,Pn+=p*l,Ln+=p*s,gn+=y,xn+=y*(kn+(kn=r)),Sn+=y*(_n+(_n=i)),wn+=y*(Cn+(Cn=u)),I(kn,_n,Cn)}function z(t,n){return[t>An?t-Tn:-An>t?t+Tn:t,n]}function H(t,n,e){return(t%=Tn)?n||e?pe(J(t),U(n,e)):J(t):n||e?U(n,e):z}function D(t){return function(n,e){return n+=t,[n>An?n-Tn:-An>n?n+Tn:n,e]}}function J(t){var n=D(t)
return n.invert=D(-t),n}function U(t,n){function e(t,n){var e=Dn(n),l=Dn(t)*e,s=$n(t)*e,c=$n(n),f=c*r+l*o
return[Hn(s*u-f*a,l*r-c*o),i(f*u+s*a)]}var r=Dn(t),o=$n(t),u=Dn(n),a=$n(n)
return e.invert=function(t,n){var e=Dn(n),l=Dn(t)*e,s=$n(t)*e,c=$n(n),f=c*u-s*a
return[Hn(s*u+c*a,l*r+f*o),i(f*r-l*o)]},e}function K(t,n,e,r,o,i){if(e){var u=Dn(n),a=$n(n),l=r*e
null==o?(o=n+r*Tn,i=n-l/2):(o=W(u,o),i=W(u,i),(r>0?i>o:o>i)&&(o+=r*Tn))
for(var s,c=o;r>0?c>i:i>c;c-=l)s=d([u,-a*Dn(c),-a*$n(c)]),t.point(s[0],s[1])}}function W(t,n){n=m(n),n[0]-=t,x(n)
var e=o(-n[1])
return((-n[2]<0?-e:e)+Tn-In)%Tn}function $(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function X(t){if(n=t.length){for(var n,e,r=0,o=t[0];++r<n;)o.n=e=t[r],e.p=o,o=e
o.n=e=t[0],e.p=o}}function Y(t,e,r,o){function i(n,i){return n>=t&&r>=n&&i>=e&&o>=i}function u(n,i,u,l){var c=0,f=0
if(null==n||(c=a(n,u))!==(f=a(i,u))||s(n,i)<0^u>0){do l.point(0===c||3===c?t:r,c>1?o:e)
while((c=(c+u+4)%4)!==f)}else l.point(i[0],i[1])}function a(n,o){return Gn(n[0]-t)<In?o>0?0:3:Gn(n[0]-r)<In?o>0?2:1:Gn(n[1]-e)<In?o>0?1:0:o>0?3:2}function l(t,n){return s(t.x,n.x)}function s(t,n){var e=a(t,1),r=a(n,1)
return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){function s(t,n){i(t,n)&&N.point(t,n)}function c(){for(var n=0,e=0,r=g.length;r>e;++e)for(var i,u,a=g[e],l=1,s=a.length,c=a[0],f=c[0],p=c[1];s>l;++l)i=f,u=p,c=a[l],f=c[0],p=c[1],o>=u?p>o&&(f-i)*(o-u)>(p-u)*(t-i)&&++n:o>=p&&(p-u)*(t-i)>(f-i)*(o-u)&&--n
return n}function f(){N=B,m=[],g=[],L=!0}function p(){var t=c(),e=L&&t,r=(m=n.merge(m)).length;(e||r)&&(a.polygonStart(),e&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),r&&ke(m,l,t,u,a),a.polygonEnd()),N=a,m=g=v=null}function y(){k.point=d,g&&g.push(v=[]),P=!0,M=!1,S=w=NaN}function h(){m&&(d(b,E),x&&M&&B.rejoin(),m.push(B.result())),k.point=s,M&&N.lineEnd()}function d(n,u){var a=i(n,u)
if(g&&v.push([n,u]),P)b=n,E=u,x=a,P=!1,a&&(N.lineStart(),N.point(n,u))
else if(a&&M)N.point(n,u)
else{var l=[S=Math.max(Ce,Math.min(_e,S)),w=Math.max(Ce,Math.min(_e,w))],s=[n=Math.max(Ce,Math.min(_e,n)),u=Math.max(Ce,Math.min(_e,u))]
Ne(l,s,t,e,r,o)?(M||(N.lineStart(),N.point(l[0],l[1])),N.point(s[0],s[1]),a||N.lineEnd(),L=!1):a&&(N.lineStart(),N.point(n,u),L=!1)}S=n,w=u,M=a}var m,g,v,b,E,x,S,w,M,P,L,N=a,B=Le(),k={point:s,lineStart:y,lineEnd:h,polygonStart:f,polygonEnd:p}
return k}}function Z(){Fe.point=tt,Fe.lineEnd=Q}function Q(){Fe.point=Fe.lineEnd=a}function tt(t,n){t*=Rn,n*=Rn,ye=t,he=$n(n),de=Dn(n),Fe.point=nt}function nt(t,n){t*=Rn,n*=Rn
var e=$n(n),r=Dn(n),o=Gn(t-ye),i=Dn(o),u=$n(o),a=r*u,l=de*e-he*r*i,s=he*e+de*r*i
Ie.add(Hn(Yn(a*a+l*l),s)),ye=t,he=e,de=r}function et(t,e,r){var o=n.range(t,e-In,r).concat(e)
return function(t){return o.map(function(n){return[t,n]})}}function rt(t,e,r){var o=n.range(t,e-In,r).concat(e)
return function(t){return o.map(function(n){return[n,t]})}}function ot(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return n.range(Jn(u/g)*g,i,g).map(y).concat(n.range(Jn(c/v)*v,s,v).map(h)).concat(n.range(Jn(o/d)*d,r,d).filter(function(t){return Gn(t%g)>In}).map(f)).concat(n.range(Jn(l/m)*m,a,m).filter(function(t){return Gn(t%v)>In}).map(p))}var r,o,i,u,a,l,s,c,f,p,y,h,d=10,m=d,g=90,v=360,b=2.5
return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[y(u).concat(h(s).slice(1),y(i).reverse().slice(1),h(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.extentMajor(n).extentMinor(n):t.extentMinor()},t.extentMajor=function(n){return arguments.length?(u=+n[0][0],i=+n[1][0],c=+n[0][1],s=+n[1][1],u>i&&(n=u,u=i,i=n),c>s&&(n=c,c=s,s=n),t.precision(b)):[[u,c],[i,s]]},t.extentMinor=function(n){return arguments.length?(o=+n[0][0],r=+n[1][0],l=+n[0][1],a=+n[1][1],o>r&&(n=o,o=r,r=n),l>a&&(n=l,l=a,a=n),t.precision(b)):[[o,l],[r,a]]},t.step=function(n){return arguments.length?t.stepMajor(n).stepMinor(n):t.stepMinor()},t.stepMajor=function(n){return arguments.length?(g=+n[0],v=+n[1],t):[g,v]},t.stepMinor=function(n){return arguments.length?(d=+n[0],m=+n[1],t):[d,m]},t.precision=function(n){return arguments.length?(b=+n,f=et(l,a,90),p=rt(o,r,b),y=et(c,s,90),h=rt(u,i,b),t):b},t.extentMajor([[-180,-90+In],[180,90-In]]).extentMinor([[-180,-80-In],[180,80+In]])}function it(){return ot()()}function ut(){He.point=at}function at(t,n){He.point=lt,me=ve=t,ge=be=n}function lt(t,n){ze.add(be*t-ve*n),ve=t,be=n}function st(){lt(me,ge)}function ct(t,n){De>t&&(De=t),t>Ue&&(Ue=t),Je>n&&(Je=n),n>Ke&&(Ke=n)}function ft(t,n){$e+=t,Xe+=n,++Ye}function pt(){or.point=yt}function yt(t,n){or.point=ht,ft(Se=t,we=n)}function ht(t,n){var e=t-Se,r=n-we,o=Yn(e*e+r*r)
Ze+=o*(Se+t)/2,Qe+=o*(we+n)/2,tr+=o,ft(Se=t,we=n)}function dt(){or.point=ft}function mt(){or.point=vt}function gt(){bt(Ee,xe)}function vt(t,n){or.point=bt,ft(Ee=Se=t,xe=we=n)}function bt(t,n){var e=t-Se,r=n-we,o=Yn(e*e+r*r)
Ze+=o*(Se+t)/2,Qe+=o*(we+n)/2,tr+=o,o=we*t-Se*n,nr+=o*(Se+t),er+=o*(we+n),rr+=3*o,ft(Se=t,we=n)}function Et(t){this._context=t}function xt(){this._string=[]}function St(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function wt(t){return t.length>1}function Mt(t,n){return((t=t.x)[0]<0?t[1]-jn-In:jn-t[1])-((n=n.x)[0]<0?n[1]-jn-In:jn-n[1])}function Pt(t){var n,e=NaN,r=NaN,o=NaN
return{lineStart:function(){t.lineStart(),n=1},point:function(i,u){var a=i>0?An:-An,l=Gn(i-e)
Gn(l-An)<In?(t.point(e,r=(r+u)/2>0?jn:-jn),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(i,r),n=0):o!==a&&l>=An&&(Gn(e-o)<In&&(e-=o*In),Gn(i-a)<In&&(i-=a*In),r=Lt(e,r,i,u),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=i,r=u),o=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Lt(t,n,e,r){var o,i,u=$n(t-e)
return Gn(u)>In?zn(($n(n)*(i=Dn(r))*$n(e)-$n(r)*(o=Dn(n))*$n(t))/(o*i*u)):(n+r)/2}function Nt(t,n,e,r){var o
if(null==t)o=e*jn,r.point(-An,o),r.point(0,o),r.point(An,o),r.point(An,0),r.point(An,-o),r.point(0,-o),r.point(-An,-o),r.point(-An,0),r.point(-An,o)
else if(Gn(t[0]-n[0])>In){var i=t[0]<n[0]?An:-An
o=e*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(n[0],n[1])}function Bt(t){return function(n){var e=new kt
for(var r in t)e[r]=t[r]
return e.stream=n,e}}function kt(){}function _t(t,n,e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],i=t.clipExtent&&t.clipExtent()
t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),ne(e,t.stream(We))
var u=We.result(),a=Math.min(r/(u[1][0]-u[0][0]),o/(u[1][1]-u[0][1])),l=+n[0][0]+(r-a*(u[1][0]+u[0][0]))/2,s=+n[0][1]+(o-a*(u[1][1]+u[0][1]))/2
return null!=i&&t.clipExtent(i),t.scale(150*a).translate([l,s])}function Ct(t,n,e){return _t(t,[[0,0],n],e)}function Ot(t){return Bt({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}function It(t,n){function e(r,o,u,a,l,s,c,f,p,y,h,d,m,g){var v=c-r,b=f-o,E=v*v+b*b
if(E>4*n&&m--){var x=a+y,S=l+h,w=s+d,M=Yn(x*x+S*S+w*w),P=i(w/=M),L=Gn(Gn(w)-1)<In||Gn(u-p)<In?(u+p)/2:Hn(S,x),N=t(L,P),B=N[0],k=N[1],_=B-r,C=k-o,O=b*_-v*C;(O*O/E>n||Gn((v*_+b*C)/E-.5)>.3||yr>a*y+l*h+s*d)&&(e(r,o,u,a,l,s,B,k,L,x/=M,S/=M,w,m,g),g.point(B,k),e(B,k,L,x,S,w,c,f,p,y,h,d,m,g))}}return function(n){function r(e,r){e=t(e,r),n.point(e[0],e[1])}function o(){v=NaN,w.point=i,n.lineStart()}function i(r,o){var i=m([r,o]),u=t(r,o)
e(v,b,g,E,x,S,v=u[0],b=u[1],g=r,E=i[0],x=i[1],S=i[2],pr,n),n.point(v,b)}function u(){w.point=r,n.lineEnd()}function a(){o(),w.point=l,w.lineEnd=s}function l(t,n){i(c=t,n),f=v,p=b,y=E,h=x,d=S,w.point=i}function s(){e(v,b,g,E,x,S,f,p,c,y,h,d,pr,n),w.lineEnd=u,u()}var c,f,p,y,h,d,g,v,b,E,x,S,w={point:r,lineStart:o,lineEnd:u,polygonStart:function(){n.polygonStart(),w.lineStart=a},polygonEnd:function(){n.polygonEnd(),w.lineStart=o}}
return w}}function Ft(t){return At(function(){return t})()}function At(t){function n(t){return t=c(t[0]*Rn,t[1]*Rn),[t[0]*m+a,l-t[1]*m]}function e(t){return t=c.invert((t[0]-a)/m,(l-t[1])/m),t&&[t[0]*qn,t[1]*qn]}function r(t,n){return t=u(t,n),[t[0]*m+a,l-t[1]*m]}function o(){c=pe(s=H(x,S,w),u)
var t=u(b,E)
return a=g-t[0]*m,l=v+t[1]*m,i()}function i(){return h=d=null,n}var u,a,l,s,c,f,p,y,h,d,m=150,g=480,v=250,b=0,E=0,x=0,S=0,w=0,M=null,P=sr,L=null,N=Re,B=.5,k=hr(r,B)
return n.stream=function(t){return h&&d===t?h:h=dr(P(s,k(N(d=t))))},n.clipAngle=function(t){return arguments.length?(P=+t?cr(M=t*Rn,6*Rn):(M=null,sr),i()):M*qn},n.clipExtent=function(t){return arguments.length?(N=null==t?(L=f=p=y=null,Re):Y(L=+t[0][0],f=+t[0][1],p=+t[1][0],y=+t[1][1]),i()):null==L?null:[[L,f],[p,y]]},n.scale=function(t){return arguments.length?(m=+t,o()):m},n.translate=function(t){return arguments.length?(g=+t[0],v=+t[1],o()):[g,v]},n.center=function(t){return arguments.length?(b=t[0]%360*Rn,E=t[1]%360*Rn,o()):[b*qn,E*qn]},n.rotate=function(t){return arguments.length?(x=t[0]%360*Rn,S=t[1]%360*Rn,w=t.length>2?t[2]%360*Rn:0,o()):[x*qn,S*qn,w*qn]},n.precision=function(t){return arguments.length?(k=hr(r,B=t*t),i()):Yn(B)},n.fitExtent=function(t,e){return _t(n,t,e)},n.fitSize=function(t,e){return Ct(n,t,e)},function(){return u=t.apply(this,arguments),n.invert=u.invert&&e,o()}}function jt(t){var n=0,e=An/3,r=At(t),o=r(n,e)
return o.parallels=function(t){return arguments.length?r(n=t[0]*Rn,e=t[1]*Rn):[n*qn,e*qn]},o}function Vt(t){function n(t,n){return[t*e,$n(n)/e]}var e=Dn(t)
return n.invert=function(t,n){return[t/e,i(n*e)]},n}function Tt(t,n){function e(t,n){var e=Yn(u-2*o*$n(n))/o
return[e*$n(t*=o),a-e*Dn(t)]}var r=$n(t),o=(r+$n(n))/2
if(Gn(o)<In)return Vt(t)
var u=1+r*(2*o-r),a=Yn(u)/o
return e.invert=function(t,n){var e=a-n
return[Hn(t,Gn(e))/o*Xn(e),i((u-(t*t+e*e)*o*o)/(2*o))]},e}function qt(t){var n=t.length
return{point:function(e,r){for(var o=-1;++o<n;)t[o].point(e,r)},sphere:function(){for(var e=-1;++e<n;)t[e].sphere()},lineStart:function(){for(var e=-1;++e<n;)t[e].lineStart()},lineEnd:function(){for(var e=-1;++e<n;)t[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<n;)t[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<n;)t[e].polygonEnd()}}}function Rt(t){return function(n,e){var r=Dn(n),o=Dn(e),i=t(r*o)
return[i*o*$n(n),i*$n(e)]}}function Gt(t){return function(n,e){var r=Yn(n*n+e*e),o=t(r),u=$n(o),a=Dn(o)
return[Hn(n*u,r*a),i(r&&e*u/r)]}}function zt(t,n){return[t,Kn(Zn((jn+n)/2))]}function Ht(t){var n,e=Ft(t),r=e.scale,o=e.translate,i=e.clipExtent
return e.scale=function(t){return arguments.length?(r(t),n&&e.clipExtent(null),e):r()},e.translate=function(t){return arguments.length?(o(t),n&&e.clipExtent(null),e):o()},e.clipExtent=function(t){if(!arguments.length)return n?null:i()
if(n=null==t){var u=An*r(),a=o()
t=[[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]]}return i(t),e},e.clipExtent(null)}function Dt(t){return Zn((jn+t)/2)}function Jt(t,n){function e(t,n){i>0?-jn+In>n&&(n=-jn+In):n>jn-In&&(n=jn-In)
var e=i/Wn(Dt(n),o)
return[e*$n(o*t),i-e*Dn(o*t)]}var r=Dn(t),o=t===n?$n(t):Kn(r/Dn(n))/Kn(Dt(n)/Dt(t)),i=r*Wn(Dt(t),o)/o
return o?(e.invert=function(t,n){var e=i-n,r=Xn(o)*Yn(t*t+e*e)
return[Hn(t,Gn(e))/o*Xn(e),2*zn(Wn(i/r,1/o))-jn]},e):zt}function Ut(t,n){return[t,n]}function Kt(t,n){function e(t,n){var e=i-n,r=o*t
return[e*$n(r),i-e*Dn(r)]}var r=Dn(t),o=t===n?$n(t):(r-Dn(n))/(n-t),i=r/o+t
return Gn(o)<In?Ut:(e.invert=function(t,n){var e=i-n
return[Hn(t,Gn(e))/o*Xn(e),i-Xn(o)*Yn(t*t+e*e)]},e)}function Wt(t,n){var e=Dn(n),r=Dn(t)*e
return[e*$n(t)/r,$n(n)/r]}function $t(t,n,e){return 1===t&&0===n&&0===e?Re:Bt({point:function(r,o){this.stream.point(r*t+n,o*t+e)}})}function Xt(t,n){return[Dn(n)*$n(t),$n(n)]}function Yt(t,n){var e=Dn(n),r=1+Dn(t)*e
return[e*$n(t)/r,$n(n)/r]}function Zt(t,n){return[Kn(Zn((jn+n)/2)),-t]}var Qt=function(){return new e}
e.prototype={constructor:e,reset:function(){this.s=this.t=0},add:function(t){r(On,t,this.t),r(this,On.s,this.s),this.s?this.t+=On.t:this.s=On.t},valueOf:function(){return this.s}}
var tn,nn,en,rn,on,un,an,ln,sn,cn,fn,pn,yn,hn,dn,mn,gn,vn,bn,En,xn,Sn,wn,Mn,Pn,Ln,Nn,Bn,kn,_n,Cn,On=new e,In=1e-6,Fn=1e-12,An=Math.PI,jn=An/2,Vn=An/4,Tn=2*An,qn=180/An,Rn=An/180,Gn=Math.abs,zn=Math.atan,Hn=Math.atan2,Dn=Math.cos,Jn=Math.ceil,Un=Math.exp,Kn=Math.log,Wn=Math.pow,$n=Math.sin,Xn=Math.sign||function(t){return t>0?1:0>t?-1:0},Yn=Math.sqrt,Zn=Math.tan,Qn={Feature:function(t,n){l(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,o=e.length;++r<o;)l(e[r].geometry,n)}},te={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){s(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)s(e[r],n,0)},Polygon:function(t,n){c(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)c(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,o=e.length;++r<o;)l(e[r],n)}},ne=function(t,n){t&&Qn.hasOwnProperty(t.type)?Qn[t.type](t,n):l(t,n)},ee=Qt(),re=Qt(),oe={point:a,lineStart:a,lineEnd:a,polygonStart:function(){ee.reset(),oe.lineStart=f,oe.lineEnd=p},polygonEnd:function(){var t=+ee
re.add(0>t?Tn+t:t),this.lineStart=this.lineEnd=this.point=a},sphere:function(){re.add(Tn)}},ie=function(t){return re.reset(),ne(t,oe),2*re},ue=Qt(),ae={point:S,lineStart:M,lineEnd:P,polygonStart:function(){ae.point=L,ae.lineStart=N,ae.lineEnd=B,ue.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),ae.point=S,ae.lineStart=M,ae.lineEnd=P,0>ee?(un=-(ln=180),an=-(sn=90)):ue>In?sn=90:-In>ue&&(an=-90),dn[0]=un,dn[1]=ln}},le=function(t){var n,e,r,o,i,u,a
if(sn=ln=-(un=an=1/0),hn=[],ne(t,ae),e=hn.length){for(hn.sort(_),n=1,r=hn[0],i=[r];e>n;++n)o=hn[n],C(r,o[0])||C(r,o[1])?(k(r[0],o[1])>k(r[0],r[1])&&(r[1]=o[1]),k(o[0],r[1])>k(r[0],r[1])&&(r[0]=o[0])):i.push(r=o)
for(u=-(1/0),e=i.length-1,n=0,r=i[e];e>=n;r=o,++n)o=i[n],(a=k(r[1],o[0]))>u&&(u=a,un=o[0],ln=r[1])}return hn=dn=null,un===1/0||an===1/0?[[NaN,NaN],[NaN,NaN]]:[[un,an],[ln,sn]]},se={sphere:a,point:O,lineStart:F,lineEnd:V,polygonStart:function(){se.lineStart=T,se.lineEnd=q},polygonEnd:function(){se.lineStart=F,se.lineEnd=V}},ce=function(t){mn=gn=vn=bn=En=xn=Sn=wn=Mn=Pn=Ln=0,ne(t,se)
var n=Mn,e=Pn,r=Ln,o=n*n+e*e+r*r
return Fn>o&&(n=xn,e=Sn,r=wn,In>gn&&(n=vn,e=bn,r=En),o=n*n+e*e+r*r,Fn>o)?[NaN,NaN]:[Hn(e,n)*qn,i(r/Yn(o))*qn]},fe=function(t){return function(){return t}},pe=function(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),e}
z.invert=z
var ye,he,de,me,ge,ve,be,Ee,xe,Se,we,Me=function(t){function n(n){return n=t(n[0]*Rn,n[1]*Rn),n[0]*=qn,n[1]*=qn,n}return t=H(t[0]*Rn,t[1]*Rn,t.length>2?t[2]*Rn:0),n.invert=function(n){return n=t.invert(n[0]*Rn,n[1]*Rn),n[0]*=qn,n[1]*=qn,n},n},Pe=function(){function t(t,n){e.push(t=r(t,n)),t[0]*=qn,t[1]*=qn}function n(){var t=o.apply(this,arguments),n=i.apply(this,arguments)*Rn,l=u.apply(this,arguments)*Rn
return e=[],r=H(-t[0]*Rn,-t[1]*Rn,0).invert,K(a,n,l,1),t={type:"Polygon",coordinates:[e]},e=r=null,t}var e,r,o=fe([0,0]),i=fe(90),u=fe(6),a={point:t}
return n.center=function(t){return arguments.length?(o="function"==typeof t?t:fe([+t[0],+t[1]]),n):o},n.radius=function(t){return arguments.length?(i="function"==typeof t?t:fe(+t),n):i},n.precision=function(t){return arguments.length?(u="function"==typeof t?t:fe(+t),n):u},n},Le=function(){var t,n=[]
return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:a,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n
return n=[],t=null,e}}},Ne=function(t,n,e,r,o,i){var u,a=t[0],l=t[1],s=n[0],c=n[1],f=0,p=1,y=s-a,h=c-l
if(u=e-a,y||!(u>0)){if(u/=y,0>y){if(f>u)return
p>u&&(p=u)}else if(y>0){if(u>p)return
u>f&&(f=u)}if(u=o-a,y||!(0>u)){if(u/=y,0>y){if(u>p)return
u>f&&(f=u)}else if(y>0){if(f>u)return
p>u&&(p=u)}if(u=r-l,h||!(u>0)){if(u/=h,0>h){if(f>u)return
p>u&&(p=u)}else if(h>0){if(u>p)return
u>f&&(f=u)}if(u=i-l,h||!(0>u)){if(u/=h,0>h){if(u>p)return
u>f&&(f=u)}else if(h>0){if(f>u)return
p>u&&(p=u)}return f>0&&(t[0]=a+f*y,t[1]=l+f*h),1>p&&(n[0]=a+p*y,n[1]=l+p*h),!0}}}}},Be=function(t,n){return Gn(t[0]-n[0])<In&&Gn(t[1]-n[1])<In},ke=function(t,n,e,r,o){var i,u,a=[],l=[]
if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n]
if(Be(r,u)){for(o.lineStart(),i=0;n>i;++i)o.point((r=t[i])[0],r[1])
return void o.lineEnd()}a.push(e=new $(r,t,null,!0)),l.push(e.o=new $(r,null,e,!1)),a.push(e=new $(u,t,null,!1)),l.push(e.o=new $(u,null,e,!0))}}),a.length){for(l.sort(n),X(a),X(l),i=0,u=l.length;u>i;++i)l[i].e=e=!e
for(var s,c,f=a[0];;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return
s=p.z,o.lineStart()
do{if(p.v=p.o.v=!0,p.e){if(y)for(i=0,u=s.length;u>i;++i)o.point((c=s[i])[0],c[1])
else r(p.x,p.n.x,1,o)
p=p.n}else{if(y)for(s=p.p.z,i=s.length-1;i>=0;--i)o.point((c=s[i])[0],c[1])
else r(p.x,p.p.x,-1,o)
p=p.p}p=p.o,s=p.z,y=!y}while(!p.v)
o.lineEnd()}}},_e=1e9,Ce=-_e,Oe=function(){var t,n,e,r=0,o=0,i=960,u=500
return e={stream:function(e){return t&&n===e?t:t=Y(r,o,i,u)(n=e)},extent:function(a){return arguments.length?(r=+a[0][0],o=+a[0][1],i=+a[1][0],u=+a[1][1],t=n=null,e):[[r,o],[i,u]]}}},Ie=Qt(),Fe={sphere:a,point:a,lineStart:Z,lineEnd:a,polygonStart:a,polygonEnd:a},Ae=function(t){return Ie.reset(),ne(t,Fe),+Ie},je=[null,null],Ve={type:"LineString",coordinates:je},Te=function(t,n){return je[0]=t,je[1]=n,Ae(Ve)},qe=function(t,n){var e=t[0]*Rn,r=t[1]*Rn,o=n[0]*Rn,a=n[1]*Rn,l=Dn(r),s=$n(r),c=Dn(a),f=$n(a),p=l*Dn(e),y=l*$n(e),h=c*Dn(o),d=c*$n(o),m=2*i(Yn(u(a-r)+l*c*u(o-e))),g=$n(m),v=m?function(t){var n=$n(t*=m)/g,e=$n(m-t)/g,r=e*p+n*h,o=e*y+n*d,i=e*s+n*f
return[Hn(o,r)*qn,Hn(i,Yn(r*r+o*o))*qn]}:function(){return[e*qn,r*qn]}
return v.distance=m,v},Re=function(t){return t},Ge=Qt(),ze=Qt(),He={point:a,lineStart:a,lineEnd:a,polygonStart:function(){He.lineStart=ut,He.lineEnd=st},polygonEnd:function(){He.lineStart=He.lineEnd=He.point=a,Ge.add(Gn(ze)),ze.reset()},result:function(){var t=Ge/2
return Ge.reset(),t}},De=1/0,Je=De,Ue=-De,Ke=Ue,We={point:ct,lineStart:a,lineEnd:a,polygonStart:a,polygonEnd:a,result:function(){var t=[[De,Je],[Ue,Ke]]
return Ue=Ke=-(Je=De=1/0),t}},$e=0,Xe=0,Ye=0,Ze=0,Qe=0,tr=0,nr=0,er=0,rr=0,or={point:ft,lineStart:pt,lineEnd:dt,polygonStart:function(){or.lineStart=mt,or.lineEnd=gt},polygonEnd:function(){or.point=ft,or.lineStart=pt,or.lineEnd=dt},result:function(){var t=rr?[nr/rr,er/rr]:tr?[Ze/tr,Qe/tr]:Ye?[$e/Ye,Xe/Ye]:[NaN,NaN]
return $e=Xe=Ye=Ze=Qe=tr=nr=er=rr=0,t}}
Et.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1
break
case 1:this._context.lineTo(t,n)
break
default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Tn)}},result:a},xt.prototype={_circle:St(4.5),pointRadius:function(t){return this._circle=St(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1
break
case 1:this._string.push("L",t,",",n)
break
default:this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("")
return this._string=[],t}}}
var ir=function(t,n){function e(t){return t&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),ne(t,r(o))),o.result()}var r,o,i=4.5
return e.area=function(t){return ne(t,r(He)),He.result()},e.bounds=function(t){return ne(t,r(We)),We.result()},e.centroid=function(t){return ne(t,r(or)),or.result()},e.projection=function(n){return arguments.length?(r=null==(t=n)?Re:n.stream,e):t},e.context=function(t){return arguments.length?(o=null==(n=t)?new xt:new Et(t),"function"!=typeof i&&o.pointRadius(i),e):n},e.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(o.pointRadius(+t),+t),e):i},e.projection(t).context(n)},ur=Qt(),ar=function(t,n){var e=n[0],r=n[1],o=[$n(e),-Dn(e),0],u=0,a=0
ur.reset()
for(var l=0,s=t.length;s>l;++l)if(f=(c=t[l]).length)for(var c,f,p=c[f-1],y=p[0],h=p[1]/2+Vn,d=$n(h),g=Dn(h),b=0;f>b;++b,y=S,d=M,g=P,p=E){var E=c[b],S=E[0],w=E[1]/2+Vn,M=$n(w),P=Dn(w),L=S-y,N=L>=0?1:-1,B=N*L,k=B>An,_=d*M
if(ur.add(Hn(_*N*$n(B),g*P+_*Dn(B))),u+=k?L+N*Tn:L,k^y>=e^S>=e){var C=v(m(p),m(E))
x(C)
var O=v(o,C)
x(O)
var I=(k^L>=0?-1:1)*i(O[2]);(r>I||r===I&&(C[0]||C[1]))&&(a+=k^L>=0?1:-1)}}return(-In>u||In>u&&-In>ur)^1&a},lr=function(t,e,r,o){return function(i,u){function a(n,e){var r=i(n,e)
t(n=r[0],e=r[1])&&u.point(n,e)}function l(t,n){var e=i(t,n)
g.point(e[0],e[1])}function s(){S.point=l,g.lineStart()}function c(){S.point=a,g.lineEnd()}function f(t,n){m.push([t,n])
var e=i(t,n)
E.point(e[0],e[1])}function p(){E.lineStart(),m=[]}function y(){f(m[0][0],m[0][1]),E.lineEnd()
var t,n,e,r,o=E.clean(),i=b.result(),a=i.length
if(m.pop(),h.push(m),m=null,a)if(1&o){if(e=i[0],(n=e.length-1)>0){for(x||(u.polygonStart(),x=!0),u.lineStart(),t=0;n>t;++t)u.point((r=e[t])[0],r[1])
u.lineEnd()}}else a>1&&2&o&&i.push(i.pop().concat(i.shift())),d.push(i.filter(wt))}var h,d,m,g=e(u),v=i.invert(o[0],o[1]),b=Le(),E=e(b),x=!1,S={point:a,lineStart:s,lineEnd:c,polygonStart:function(){S.point=f,S.lineStart=p,S.lineEnd=y,d=[],h=[]},polygonEnd:function(){S.point=a,S.lineStart=s,S.lineEnd=c,d=n.merge(d)
var t=ar(h,v)
d.length?(x||(u.polygonStart(),x=!0),ke(d,Mt,t,r,u)):t&&(x||(u.polygonStart(),x=!0),u.lineStart(),r(null,null,1,u),u.lineEnd()),x&&(u.polygonEnd(),x=!1),d=h=null},sphere:function(){u.polygonStart(),u.lineStart(),r(null,null,1,u),u.lineEnd(),u.polygonEnd()}}
return S}},sr=lr(function(){return!0},Pt,Nt,[-An,-jn]),cr=function(t,n){function e(e,r,o,i){K(i,t,n,o,e,r)}function r(t,n){return Dn(t)*Dn(n)>a}function o(t){var n,e,o,a,c
return{lineStart:function(){a=o=!1,c=1},point:function(f,p){var y,h=[f,p],d=r(f,p),m=l?d?0:u(f,p):d?u(f+(0>f?An:-An),p):0
if(!n&&(a=o=d)&&t.lineStart(),d!==o&&(y=i(n,h),(Be(n,y)||Be(h,y))&&(h[0]+=In,h[1]+=In,d=r(h[0],h[1]))),d!==o)c=0,d?(t.lineStart(),y=i(h,n),t.point(y[0],y[1])):(y=i(n,h),t.point(y[0],y[1]),t.lineEnd()),n=y
else if(s&&n&&l^d){var g
m&e||!(g=i(h,n,!0))||(c=0,l?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!d||n&&Be(n,h)||t.point(h[0],h[1]),n=h,o=d,e=m},lineEnd:function(){o&&t.lineEnd(),n=null},clean:function(){return c|(a&&o)<<1}}}function i(t,n,e){var r=m(t),o=m(n),i=[1,0,0],u=v(r,o),l=g(u,u),s=u[0],c=l-s*s
if(!c)return!e&&t
var f=a*l/c,p=-a*s/c,y=v(i,u),h=E(i,f),x=E(u,p)
b(h,x)
var S=y,w=g(h,S),M=g(S,S),P=w*w-M*(g(h,h)-1)
if(!(0>P)){var L=Yn(P),N=E(S,(-w-L)/M)
if(b(N,h),N=d(N),!e)return N
var B,k=t[0],_=n[0],C=t[1],O=n[1]
k>_&&(B=k,k=_,_=B)
var I=_-k,F=Gn(I-An)<In,A=F||In>I
if(!F&&C>O&&(B=C,C=O,O=B),A?F?C+O>0^N[1]<(Gn(N[0]-k)<In?C:O):C<=N[1]&&N[1]<=O:I>An^(k<=N[0]&&N[0]<=_)){var j=E(S,(-w+L)/M)
return b(j,h),[N,d(j)]}}}function u(n,e){var r=l?t:An-t,o=0
return-r>n?o|=1:n>r&&(o|=2),-r>e?o|=4:e>r&&(o|=8),o}var a=Dn(t),l=a>0,s=Gn(a)>In
return lr(r,o,e,l?[0,-t]:[-An,t-An])},fr=function(t){return{stream:Bt(t)}}
kt.prototype={constructor:kt,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}
var pr=16,yr=Dn(30*Rn),hr=function(t,n){return+n?It(t,n):Ot(t)},dr=Bt({point:function(t,n){this.stream.point(t*Rn,n*Rn)}}),mr=function(){return jt(Tt).scale(155.424).center([0,33.6442])},gr=function(){return mr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},vr=function(){function t(t){var n=t[0],e=t[1]
return a=null,o.point(n,e),a||(i.point(n,e),a)||(u.point(n,e),a)}function n(){return e=r=null,t}var e,r,o,i,u,a,l=gr(),s=mr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=mr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,n){a=[t,n]}}
return t.invert=function(t){var n=l.scale(),e=l.translate(),r=(t[0]-e[0])/n,o=(t[1]-e[1])/n
return(o>=.12&&.234>o&&r>=-.425&&-.214>r?s:o>=.166&&.234>o&&r>=-.214&&-.115>r?c:l).invert(t)},t.stream=function(t){return e&&r===t?e:e=qt([l.stream(r=t),s.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(l.precision(t),s.precision(t),c.precision(t),n()):l.precision()},t.scale=function(n){return arguments.length?(l.scale(n),s.scale(.35*n),c.scale(n),t.translate(l.translate())):l.scale()},t.translate=function(t){if(!arguments.length)return l.translate()
var e=l.scale(),r=+t[0],a=+t[1]
return o=l.translate(t).clipExtent([[r-.455*e,a-.238*e],[r+.455*e,a+.238*e]]).stream(f),i=s.translate([r-.307*e,a+.201*e]).clipExtent([[r-.425*e+In,a+.12*e+In],[r-.214*e-In,a+.234*e-In]]).stream(f),u=c.translate([r-.205*e,a+.212*e]).clipExtent([[r-.214*e+In,a+.166*e+In],[r-.115*e-In,a+.234*e-In]]).stream(f),n()},t.fitExtent=function(n,e){return _t(t,n,e)},t.fitSize=function(n,e){return Ct(t,n,e)},t.scale(1070)},br=Rt(function(t){return Yn(2/(1+t))})
br.invert=Gt(function(t){return 2*i(t/2)})
var Er=function(){return Ft(br).scale(124.75).clipAngle(179.999)},xr=Rt(function(t){return(t=o(t))&&t/$n(t)})
xr.invert=Gt(function(t){return t})
var Sr=function(){return Ft(xr).scale(79.4188).clipAngle(179.999)}
zt.invert=function(t,n){return[t,2*zn(Un(n))-jn]}
var wr=function(){return Ht(zt).scale(961/Tn)},Mr=function(){return jt(Jt).scale(109.5).parallels([30,30])}
Ut.invert=Ut
var Pr=function(){return Ft(Ut).scale(152.63)},Lr=function(){return jt(Kt).scale(131.154).center([0,13.9389])}
Wt.invert=Gt(zn)
var Nr=function(){return Ft(Wt).scale(144.049).clipAngle(60)},Br=function(){function t(){return o=i=null,u}var n,e,r,o,i,u,a=1,l=0,s=0,c=Re,f=null,p=Re
return u={stream:function(t){return o&&i===t?o:o=c(p(i=t))},clipExtent:function(o){return arguments.length?(p=null==o?(f=n=e=r=null,Re):Y(f=+o[0][0],n=+o[0][1],e=+o[1][0],r=+o[1][1]),t()):null==f?null:[[f,n],[e,r]]},scale:function(n){return arguments.length?(c=$t(a=+n,l,s),t()):a},translate:function(n){return arguments.length?(c=$t(a,l=+n[0],s=+n[1]),t()):[l,s]},fitExtent:function(t,n){return _t(u,t,n)},fitSize:function(t,n){return Ct(u,t,n)}}}
Xt.invert=Gt(i)
var kr=function(){return Ft(Xt).scale(249.5).clipAngle(90+In)}
Yt.invert=Gt(function(t){return 2*zn(t)})
var _r=function(){return Ft(Yt).scale(250).clipAngle(142)}
Zt.invert=function(t,n){return[-n,2*zn(Un(t))-jn]}
var Cr=function(){var t=Ht(Zt),n=t.center,e=t.rotate
return t.center=function(t){return arguments.length?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90]).scale(159.155)}
t.geoArea=ie,t.geoBounds=le,t.geoCentroid=ce,t.geoCircle=Pe,t.geoClipExtent=Oe,t.geoDistance=Te,t.geoGraticule=ot,t.geoGraticule10=it,t.geoInterpolate=qe,t.geoLength=Ae,t.geoPath=ir,t.geoAlbers=gr,t.geoAlbersUsa=vr,t.geoAzimuthalEqualArea=Er,t.geoAzimuthalEqualAreaRaw=br,t.geoAzimuthalEquidistant=Sr,t.geoAzimuthalEquidistantRaw=xr,t.geoConicConformal=Mr,t.geoConicConformalRaw=Jt,t.geoConicEqualArea=mr,t.geoConicEqualAreaRaw=Tt,t.geoConicEquidistant=Lr,t.geoConicEquidistantRaw=Kt,t.geoEquirectangular=Pr,t.geoEquirectangularRaw=Ut,t.geoGnomonic=Nr,t.geoGnomonicRaw=Wt,t.geoIdentity=Br,t.geoProjection=Ft,t.geoProjectionMutator=At,t.geoMercator=wr,t.geoMercatorRaw=zt,t.geoOrthographic=kr,t.geoOrthographicRaw=Xt,t.geoStereographic=_r,t.geoStereographicRaw=Yt,t.geoTransverseMercator=Cr,t.geoTransverseMercatorRaw=Zt,t.geoRotation=Me,t.geoStream=ne,t.geoTransform=fr,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":43}],45:[function(t,n,e){function r(t,n,e,i){if(t===n.length)i(e)
else{var u=n[t]
if("Polygon"===u.geometry.type)o(u.geometry.coordinates)===!1&&u.geometry.coordinates[0].reverse(),e.push(u)
else if("MultiPolygon"===u.geometry.type){var a=u.geometry.coordinates,l=[]
for(x=0;x<a.length;x++)o(a[x])===!1?(a[x][0].reverse(),l.push(a[x])):l.push(a[x])
u.geometry.coordinates=l,e.push(u)}else e.push(u)
t+=1,t/100===Math.floor(t/100)?setTimeout(function(){r(t,n,e,i)},1):r(t,n,e,i)}}function o(t){var n=i(t[0])<0
return n}function i(t){for(var n=0,e=0;e<t.length;e++)j=(e+1)%t.length,n+=t[e][0]*t[j][1],n-=t[j][0]*t[e][1]
return n/2}n.exports=function(t,n){var e=t.features
r(0,e,[],function(e){t.features=e,n(t)})}},{}]},{},[2])
